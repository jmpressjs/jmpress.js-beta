webpackJsonp(1,{16:function(a,b,c){a.exports=function(a){var b={"./active.js":22,"./ajax.js":23,"./animation.js":24,"./circular.js":25,"./core.js":26,"./demo.js":27,"./hash.js":28,"./jqevents.js":29,"./keyboard.js":30,"./mobile.js":31,"./mouse.js":32,"./near.js":33,"./start.js":34,"./templates.js":35,"./transform.js":36,"./viewport.js":37,"./ways.js":38};return c(b[a+""]||b[a+".webpack.js"]||b[a+".web.js"]||b[a+".js"]||a)}},17:function(a,b,c){a.exports=function(a){var b={"./duration.js":39,"./presentation-mode.js":40,"./secondary.js":41,"./toggle.js":42};return c(b[a+""]||b[a+".webpack.js"]||b[a+".web.js"]||b[a+".js"]||a)}},18:function(a,b,c){function d(a){if(a===null||typeof a=="undefined")return"";var b=a+"",c="",d,e,f=0;d=e=0,f=b.length;for(var g=0;g<f;g++){var h=b.charCodeAt(g),i=null;h<128?e++:h>127&&h<2048?i=String.fromCharCode(h>>6|192)+String.fromCharCode(h&63|128):i=String.fromCharCode(h>>12|224)+String.fromCharCode(h>>6&63|128)+String.fromCharCode(h&63|128),i!==null&&(e>d&&(c+=b.slice(d,e)),c+=i,d=e=g+1)}return e>d&&(c+=b.slice(d,f)),c}function e(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c,e,f,g,h,i,j,k,l=0,m=0,n="",o=[];if(!a)return a;a=d(a+"");do c=a.charCodeAt(l++),e=a.charCodeAt(l++),f=a.charCodeAt(l++),k=c<<16|e<<8|f,g=k>>18&63,h=k>>12&63,i=k>>6&63,j=k&63,o[m++]=b.charAt(g)+b.charAt(h)+b.charAt(i)+b.charAt(j);while(l<a.length);n=o.join("");var p=a.length%3;return(p?n.slice(0,p-3):n)+"===".slice(p||3)}a.exports=e},19:function(a,b,c){function e(a){return c(16)("./"+a+".js")}function f(a){return c(17)("./"+a+".js")}function g(a){function c(a){b[a.name]=!0,a.dependencies&&a.dependencies.forEach(c)}var b={};d.components.forEach(function(b){a[b.name]&&c(b)});var g=[e("core"),e("near")];return d.components.forEach(function(a){b[a.name]&&g.push(a.plugin?f(a.name):e(a.name))}),g.join("\n")}var d=c(3);a.exports=g},22:function(a,b,c){a.exports="/*!\r\n * active.js\r\n * Set the active classes on steps\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	'use strict';\r\n	var $jmpress = $.jmpress;\r\n\r\n	/* DEFINES */\r\n	var activeClass = 'activeClass',\r\n		nestedActiveClass = 'nestedActiveClass';\r\n\r\n	/* DEFAULTS */\r\n	var defaults = $jmpress( 'defaults' );\r\n	defaults[nestedActiveClass] = \"nested-active\";\r\n	defaults[activeClass]       = \"active\";\r\n\r\n	/* HOOKS */\r\n	$jmpress( 'setInactive', function( step, eventData ) {\r\n		var settings = eventData.settings,\r\n			activeClassSetting = settings[activeClass],\r\n			nestedActiveClassSettings = settings[nestedActiveClass];\r\n		if(activeClassSetting) {\r\n			$(step).removeClass( activeClassSetting );\r\n		}\r\n		if(nestedActiveClassSettings) {\r\n			$.each(eventData.parents, function(idx, element) {\r\n				$(element).removeClass(nestedActiveClassSettings);\r\n			});\r\n		}\r\n	});\r\n	$jmpress( 'setActive', function( step, eventData ) {\r\n		var settings = eventData.settings,\r\n			activeClassSetting = settings[activeClass],\r\n			nestedActiveClassSettings = settings[nestedActiveClass];\r\n		if(activeClassSetting) {\r\n			$(step).addClass( activeClassSetting );\r\n		}\r\n		if(nestedActiveClassSettings) {\r\n			$.each(eventData.parents, function(idx, element) {\r\n				$(element).addClass(nestedActiveClassSettings);\r\n			});\r\n		}\r\n	});\r\n\r\n}(jQuery, document, window));"},23:function(a,b,c){a.exports="/*!\r\n * ajax.js\r\n * Load steps via ajax\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	'use strict';\r\n	var $jmpress = $.jmpress;\r\n\r\n	/* DEFINES */\r\n	var afterStepLoaded = 'ajax:afterStepLoaded',\r\n		loadStep = 'ajax:loadStep';\r\n\r\n	/* REGISTER EVENTS */\r\n	$jmpress('register', loadStep);\r\n	$jmpress('register', afterStepLoaded);\r\n\r\n	/* DEFAULTS */\r\n	$jmpress('defaults').ajaxLoadedClass = \"loaded\";\r\n\r\n	/* HOOKS */\r\n	$jmpress('initStep', function( step, eventData ) {\r\n		eventData.stepData.src = $(step).attr('href') || eventData.data.src || false;\r\n		eventData.stepData.srcLoaded = false;\r\n	});\r\n	$jmpress(loadStep, function( step, eventData ) {\r\n		var stepData = eventData.stepData,\r\n			href = stepData && stepData.src,\r\n			settings = eventData.settings;\r\n		if ( href ) {\r\n			$(step).addClass( settings.ajaxLoadedClass );\r\n			stepData.srcLoaded = true;\r\n			$(step).load(href, function(response, status, xhr) {\r\n				$(eventData.jmpress).jmpress('fire', afterStepLoaded, step, $.extend({}, eventData, {\r\n					response: response\r\n					,status: status\r\n					,xhr: xhr\r\n				}));\r\n			});\r\n		}\r\n	});\r\n	$jmpress('idle', function( step, eventData ) {\r\n		if (!step) {\r\n			return;\r\n		}\r\n		var settings = eventData.settings,\r\n			jmpress = $(this),\r\n			stepData = eventData.stepData;\r\n		var siblings = $(step)\r\n			.add( $(step).near( settings.stepSelector ) )\r\n			.add( $(step).near( settings.stepSelector, true) )\r\n			.add( jmpress.jmpress('fire', 'selectPrev', step, {\r\n				stepData: $(step).data('stepData')\r\n			}))\r\n			.add( jmpress.jmpress('fire', 'selectNext', step, {\r\n				stepData: $(step).data('stepData')\r\n			}));\r\n		siblings.each(function() {\r\n			var step = this,\r\n				stepData = $(step).data(\"stepData\");\r\n			if(!stepData.src || stepData.srcLoaded) {\r\n				return;\r\n			}\r\n			jmpress.jmpress('fire', loadStep, step, {\r\n				stepData: $(step).data('stepData')\r\n			});\r\n		});\r\n	});\r\n	$jmpress(\"setActive\", function(step, eventData) {\r\n		var stepData = $(step).data(\"stepData\");\r\n		if(!stepData.src || stepData.srcLoaded) {\r\n			return;\r\n		}\r\n		$(this).jmpress('fire', loadStep, step, {\r\n			stepData: $(step).data('stepData')\r\n		});\r\n	});\r\n\r\n}(jQuery, document, window));"},24:function(a,b,c){a.exports='/*!\r\n * animation.js\r\n * Apply custom animations to steps\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n\r\n	function randomString() {\r\n		return "" + Math.round(Math.random() * 100000, 0);\r\n	}\r\n\r\n	function parseSubstepInfo(str) {\r\n		var arr = str.split(" ");\r\n		var className = arr[0];\r\n		var config = { willClass: "will-"+className, doClass: "do-"+className, hasClass: "has-"+className };\r\n		var state = "";\r\n		for(var i = 1; i < arr.length; i++) {\r\n			var s = arr[i];\r\n			switch(state) {\r\n			case "":\r\n				if(s === "after") {\r\n					state = "after";\r\n				} else {\r\n					$.warn("unknown keyword in \'"+str+"\'. \'"+s+"\' unknown.");\r\n				}\r\n				break;\r\n			case "after":\r\n				if(s.match(/^[1-9][0-9]*m?s?/)) {\r\n					var value = parseFloat(s);\r\n					if(s.indexOf("ms") !== -1) {\r\n						value *= 1;\r\n					} else if(s.indexOf("s") !== -1) {\r\n						value *= 1000;\r\n					} else if(s.indexOf("m") !== -1) {\r\n						value *= 60000;\r\n					}\r\n					config.delay = value;\r\n				} else {\r\n					config.after = Array.prototype.slice.call(arr, i).join(" ");\r\n				}\r\n			}\r\n		}\r\n		return config;\r\n	}\r\n	function find(array, selector, start, end) {\r\n		end = end || (array.length - 1);\r\n		start = start || 0;\r\n		for(var i = start; i < end + 1; i++) {\r\n			if($(array[i].element).is(selector)) {\r\n				return i;\r\n			}\r\n		}\r\n	}\r\n	function addOn(list, substep, delay) {\r\n		$.each(substep._on, function(idx, child) {\r\n			list.push({substep: child.substep, delay: child.delay + delay});\r\n			addOn(list, child.substep, child.delay + delay);\r\n		});\r\n	}\r\n	$.jmpress("defaults").customAnimationDataAttribute = "jmpress";\r\n	$.jmpress("afterInit", function( nil, eventData ) {\r\n		eventData.current.animationTimeouts = [];\r\n		eventData.current.animationCleanupWaiting = [];\r\n	});\r\n	$.jmpress("applyStep", function( step, eventData ) {\r\n		// read custom animation from elements\r\n		var substepsData = {};\r\n		var listOfSubsteps = [];\r\n		$(step).find("[data-"+eventData.settings.customAnimationDataAttribute+"]")\r\n				.each(function(idx, element) {\r\n			if($(element).closest(eventData.settings.stepSelector).is(step)) {\r\n				listOfSubsteps.push({element: element});\r\n			}\r\n		});\r\n		if(listOfSubsteps.length === 0) {\r\n			return;\r\n		}\r\n		$.each(listOfSubsteps, function(idx, substep) {\r\n			substep.info = parseSubstepInfo(\r\n				$(substep.element).data(eventData.settings.customAnimationDataAttribute));\r\n			$(substep.element).addClass(substep.info.willClass);\r\n			substep._on = [];\r\n			substep._after = null;\r\n		});\r\n		var current = {_after: undefined, _on: [], info: {}}; // virtual zero step\r\n		$.each(listOfSubsteps, function(idx, substep) {\r\n			var other = substep.info.after;\r\n			if(other) {\r\n				if(other === "step") {\r\n					other = current;\r\n				} else if(other === "prev") {\r\n					other = listOfSubsteps[idx-1];\r\n				} else {\r\n					var index = find(listOfSubsteps, other, 0, idx - 1);\r\n					if(index === -1) {\r\n						index = find(listOfSubsteps, other);\r\n					}\r\n					other = (index === -1 || index === idx) ? listOfSubsteps[idx-1] : listOfSubsteps[index];\r\n				}\r\n			} else {\r\n				other = listOfSubsteps[idx-1];\r\n			}\r\n			if(other) {\r\n				if(!substep.info.delay) {\r\n					if(!other._after) {\r\n						other._after = substep;\r\n						return;\r\n					}\r\n					other = other._after;\r\n				}\r\n				other._on.push({substep: substep, delay: substep.info.delay || 0});\r\n			}\r\n		});\r\n		if(current._after === undefined && current._on.length === 0) {\r\n			var startStep = find(listOfSubsteps, eventData.stepData.startSubstep) || 0;\r\n			current._after = listOfSubsteps[startStep];\r\n		}\r\n		var substepsInOrder = [];\r\n		function findNextFunc(idx, item) {\r\n			if(item.substep._after) {\r\n				current = item.substep._after;\r\n				return false;\r\n			}\r\n		}\r\n		do {\r\n			var substepList = [{substep: current, delay: 0}];\r\n			addOn(substepList, current, 0);\r\n			substepsInOrder.push(substepList);\r\n			current = null;\r\n			$.each(substepList, findNextFunc);\r\n		} while(current);\r\n		substepsData.list = substepsInOrder;\r\n		$(step).data("substepsData", substepsData);\r\n	});\r\n	$.jmpress("unapplyStep", function( step, eventData ) {\r\n		var substepsData = $(step).data("substepsData");\r\n		if(substepsData) {\r\n			$.each(substepsData.list, function(idx, activeSubsteps) {\r\n				$.each(activeSubsteps, function(idx, substep) {\r\n					if(substep.substep.info.willClass) {\r\n						$(substep.substep.element).removeClass(substep.substep.info.willClass);\r\n					}\r\n					if(substep.substep.info.hasClass) {\r\n						$(substep.substep.element).removeClass(substep.substep.info.hasClass);\r\n					}\r\n					if(substep.substep.info.doClass) {\r\n						$(substep.substep.element).removeClass(substep.substep.info.doClass);\r\n					}\r\n				});\r\n			});\r\n		}\r\n	});\r\n	$.jmpress("setActive", function(step, eventData) {\r\n		var substepsData = $(step).data("substepsData");\r\n		if(!substepsData) {\r\n			return;\r\n		}\r\n		if(eventData.substep === undefined) {\r\n			eventData.substep =\r\n				(eventData.reason === "prev" ?\r\n					substepsData.list.length-1 :\r\n					0\r\n				);\r\n		}\r\n		var substep = eventData.substep;\r\n		$.each(eventData.current.animationTimeouts, function(idx, timeout) {\r\n			clearTimeout(timeout);\r\n		});\r\n		eventData.current.animationTimeouts = [];\r\n		$.each(substepsData.list, function(idx, activeSubsteps) {\r\n			var applyHas = idx < substep;\r\n			var applyDo = idx <= substep;\r\n			$.each(activeSubsteps, function(idx, substep) {\r\n				if(substep.substep.info.hasClass) {\r\n					$(substep.substep.element)[(applyHas?"add":"remove")+"Class"](substep.substep.info.hasClass);\r\n				}\r\n				function applyIt() {\r\n					$(substep.substep.element).addClass(substep.substep.info.doClass);\r\n				}\r\n				if(applyDo && !applyHas && substep.delay && eventData.reason !== "prev") {\r\n					if(substep.substep.info.doClass) {\r\n						$(substep.substep.element).removeClass(substep.substep.info.doClass);\r\n						eventData.current.animationTimeouts.push(setTimeout(applyIt, substep.delay));\r\n					}\r\n				} else {\r\n					if(substep.substep.info.doClass) {\r\n						$(substep.substep.element)[(applyDo?"add":"remove")+"Class"](substep.substep.info.doClass);\r\n					}\r\n				}\r\n			});\r\n		});\r\n	});\r\n	$.jmpress("setInactive", function(step, eventData) {\r\n		if(eventData.nextStep === step) {\r\n			return;\r\n		}\r\n		function cleanupAnimation( substepsData ) {\r\n			$.each(substepsData.list, function(idx, activeSubsteps) {\r\n				$.each(activeSubsteps, function(idx, substep) {\r\n					if(substep.substep.info.hasClass) {\r\n						$(substep.substep.element).removeClass(substep.substep.info.hasClass);\r\n					}\r\n					if(substep.substep.info.doClass) {\r\n						$(substep.substep.element).removeClass(substep.substep.info.doClass);\r\n					}\r\n				});\r\n			});\r\n		}\r\n		$.each(eventData.current.animationCleanupWaiting, function(idx, item) {\r\n			cleanupAnimation(item);\r\n		});\r\n		eventData.current.animationCleanupWaiting = [];\r\n		var substepsData = $(step).data("substepsData");\r\n		if(substepsData) {\r\n			eventData.current.animationCleanupWaiting.push( substepsData );\r\n		}\r\n	});\r\n	$.jmpress("selectNext", function( step, eventData ) {\r\n		if(eventData.substep === undefined) {\r\n			return;\r\n		}\r\n		var substepsData = $(step).data("substepsData");\r\n		if(!substepsData) {\r\n			return;\r\n		}\r\n		if(eventData.substep < substepsData.list.length-1) {\r\n			return {step: step, substep: eventData.substep+1};\r\n		}\r\n	});\r\n	$.jmpress("selectPrev", function( step, eventData ) {\r\n		if(eventData.substep === undefined) {\r\n			return;\r\n		}\r\n		var substepsData = $(step).data("substepsData");\r\n		if(!substepsData) {\r\n			return;\r\n		}\r\n		if(eventData.substep > 0) {\r\n			return {step: step, substep: eventData.substep-1};\r\n		}\r\n	});\r\n\r\n}(jQuery, document, window));'},25:function(a,b,c){a.exports="/*!\r\n * circular.js\r\n * Repeat from start after end\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	'use strict';\r\n	var $jmpress = $.jmpress;\r\n\r\n	/* FUNCTIONS */\r\n	function firstSlide( step, eventData ) {\r\n		return $(this).find(eventData.settings.stepSelector).first();\r\n	}\r\n	function prevOrNext( jmpress, step, eventData, prev) {\r\n		if (!step) {\r\n			return false;\r\n		}\r\n		var stepSelector = eventData.settings.stepSelector;\r\n		step = $(step);\r\n		do {\r\n			var item = step.near( stepSelector, prev );\r\n			if (item.length === 0 || item.closest(jmpress).length === 0) {\r\n				item = $(jmpress).find(stepSelector)[prev?\"last\":\"first\"]();\r\n			}\r\n			if (!item.length) {\r\n				return false;\r\n			}\r\n			step = item;\r\n		} while( step.data(\"stepData\").exclude );\r\n		return step;\r\n	}\r\n\r\n	/* HOOKS */\r\n	$jmpress( 'initStep', function( step, eventData ) {\r\n		eventData.stepData.exclude = eventData.data.exclude && [\"false\", \"no\"].indexOf(eventData.data.exclude) === -1;\r\n	});\r\n	$jmpress( 'selectInitialStep', firstSlide);\r\n	$jmpress( 'selectHome', firstSlide);\r\n	$jmpress( 'selectEnd', function( step, eventData ) {\r\n		return $(this).find(eventData.settings.stepSelector).last();\r\n	});\r\n	$jmpress( 'selectPrev', function( step, eventData ) {\r\n		return prevOrNext(this, step, eventData, true);\r\n	});\r\n	$jmpress( 'selectNext', function( step, eventData ) {\r\n		return prevOrNext(this, step, eventData);\r\n	});\r\n}(jQuery, document, window));"},26:function(a,b,c){a.exports="/*!\n * core.js\n * The core of jmpress.js\n */\n(function( $, document, window, undefined ) {\n\n	'use strict';\n\n	/**\n	 * Set supported prefixes\n	 *\n	 * @access protected\n	 * @return Function to get prefixed property\n	 */\n	var pfx = (function () {\n		var style = document.createElement('dummy').style,\n			prefixes = 'Webkit Moz O ms Khtml'.split(' '),\n			memory = {};\n		return function ( prop ) {\n			if ( typeof memory[ prop ] === \"undefined\" ) {\n				var ucProp  = prop.charAt(0).toUpperCase() + prop.substr(1),\n					props   = (prop + ' ' + prefixes.join(ucProp + ' ') + ucProp).split(' ');\n				memory[ prop ] = null;\n				for ( var i in props ) {\n					if ( style[ props[i] ] !== undefined ) {\n						memory[ prop ] = props[i];\n						break;\n					}\n				}\n			}\n			return memory[ prop ];\n		};\n	}());\n\n	/**\n	 * map ex. \"WebkitTransform\" to \"-webkit-transform\"\n	 */\n	function mapProperty( name ) {\n		if(!name) {\n			return;\n		}\n		var index = 1 + name.substr(1).search(/[A-Z]/);\n		var prefix = name.substr(0, index).toLowerCase();\n		var postfix = name.substr(index).toLowerCase();\n		return \"-\" + prefix + \"-\" + postfix;\n	}\n	function addComma( attribute ) {\n		if(!attribute) {\n			return \"\";\n		}\n		return attribute + \",\";\n	}\n\n	/**\n	 * Default Settings\n	 */\n	var defaults = {\n		/* CLASSES */\n		stepSelector: '.step'\n		,containerClass: ''\n		,canvasClass: ''\n		,areaClass: ''\n		,notSupportedClass: 'not-supported'\n\n		/* CONFIG */\n		,fullscreen: true\n\n		/* ANIMATION */\n		,animation: {\n			transformOrigin: 'top left'\n			,transitionProperty: addComma(mapProperty(pfx('transform'))) + addComma(mapProperty(pfx('perspective'))) + 'opacity'\n			,transitionDuration: '1s'\n			,transitionDelay: '500ms'\n			,transitionTimingFunction: 'ease-in-out'\n			,transformStyle: \"preserve-3d\"\n		}\n		,transitionDuration: 1500\n\n		/* TEST */\n		,test: false\n	};\n	var callbacks = {\n		'beforeChange': 1\n		,'beforeInitStep': 1\n		,'initStep': 1\n		,'beforeInit': 1\n		,'afterInit': 1\n		,'beforeDeinit': 1\n		,'afterDeinit': 1\n		,'applyStep': 1\n		,'unapplyStep': 1\n		,'setInactive': 1\n		,'beforeActive': 1\n		,'setActive': 1\n		,'selectInitialStep': 1\n		,'selectPrev': 1\n		,'selectNext': 1\n		,'selectHome': 1\n		,'selectEnd': 1\n		,'idle': 1\n		,'applyTarget': 1\n	};\n	for(var callbackName in callbacks) {\n		defaults[callbackName] = [];\n	}\n\n\n	/**\n	 * Initialize jmpress\n	 */\n	function init( args ) {\n		args = $.extend(true, {}, args || {});\n\n		// accept functions and arrays of functions as callbacks\n		var callbackArgs = {};\n		var callbackName = null;\n		for (callbackName in callbacks) {\n			callbackArgs[callbackName] = $.isFunction( args[callbackName] ) ?\n				[ args[callbackName] ] :\n				args[callbackName];\n			args[callbackName] = [];\n		}\n\n		// MERGE SETTINGS\n		var settings = $.extend(true, {}, defaults, args);\n\n		for (callbackName in callbacks) {\n			if (callbackArgs[callbackName]) {\n				Array.prototype.push.apply(settings[callbackName], callbackArgs[callbackName]);\n			}\n		}\n\n		/*** MEMBER VARS ***/\n\n		var jmpress = $( this )\n			,container = null\n			,area = null\n			,oldStyle = {\n				container: \"\"\n				,area: \"\"\n			}\n			,canvas = null\n			,current = null\n			,active = false\n			,activeSubstep = null\n			,activeDelegated = false;\n\n\n		/*** MEMBER FUNCTIONS ***/\n		// functions have to be called with this\n\n		/**\n		 * Init a single step\n		 *\n		 * @param element the element of the step\n		 * @param idx number of step\n		 */\n		function doStepInit( element, idx ) {\n			var data = dataset( element );\n			var step = {\n				oldStyle: $(element).attr(\"style\") || \"\"\n			};\n\n			var callbackData = {\n				data: data\n				,stepData: step\n			};\n			callCallback.call(this, 'beforeInitStep', $(element), callbackData);\n			step.delegate = data.delegate;\n			callCallback.call(this, 'initStep', $(element), callbackData);\n\n			$(element).data('stepData', step);\n\n			if ( !$(element).attr('id') ) {\n				$(element).attr('id', 'step-' + (idx + 1));\n			}\n\n			callCallback.call(this, 'applyStep', $(element), callbackData);\n		}\n		/**\n		 * Deinit a single step\n		 *\n		 * @param element the element of the step\n		 */\n		function doStepDeinit( element ) {\n			var stepData = $(element).data('stepData');\n\n			$(element).attr(\"style\", stepData.oldStyle);\n\n			callCallback.call(this, 'unapplyStep', $(element), {\n				stepData: stepData\n			});\n		}\n		/**\n		 * Reapplies stepData to the element\n		 *\n		 * @param element\n		 */\n		function doStepReapply( element ) {\n			callCallback.call(this, 'unapplyStep', $(element), {\n				stepData: element.data(\"stepData\")\n			});\n\n			callCallback.call(this, 'applyStep', $(element), {\n				stepData: element.data(\"stepData\")\n			});\n		}\n		/**\n		 * Completly deinit jmpress\n		 *\n		 */\n		function deinit() {\n			if ( active ) {\n				callCallback.call(this, 'setInactive', active, {\n					stepData: $(active).data('stepData')\n					,reason: \"deinit\"\n				} );\n			}\n			if (current.jmpressClass) {\n				$(jmpress).removeClass(current.jmpressClass);\n			}\n\n			callCallback.call(this, 'beforeDeinit', $(this), {});\n\n			$(settings.stepSelector, jmpress).each(function( idx ) {\n				doStepDeinit.call(jmpress, this );\n			});\n\n			container.attr(\"style\", oldStyle.container);\n			if(settings.fullscreen) {\n				$(\"html\").attr(\"style\", \"\");\n			}\n			area.attr(\"style\", oldStyle.area);\n			$(canvas).children().each(function() {\n				jmpress.append( $( this ) );\n			});\n			if( settings.fullscreen ) {\n				canvas.remove();\n			} else {\n				canvas.remove();\n				area.remove();\n			}\n\n			callCallback.call(this, 'afterDeinit', $(this), {});\n\n			$(jmpress).data(\"jmpressmethods\", false);\n		}\n		/**\n		 * Call a callback\n		 *\n		 * @param callbackName String callback which should be called\n		 * @param element some arguments to the callback\n		 * @param eventData\n		 */\n		function callCallback( callbackName, element, eventData ) {\n			eventData.settings = settings;\n			eventData.current = current;\n			eventData.container = container;\n			eventData.parents = element ? getStepParents(element) : null;\n			eventData.current = current;\n			eventData.jmpress = this;\n			var result = {};\n			$.each( settings[callbackName], function(idx, callback) {\n				result.value = callback.call( jmpress, element, eventData ) || result.value;\n			});\n			return result.value;\n		}\n		/**\n		 *\n		 */\n		function getStepParents( el ) {\n			return $(el).parentsUntil(jmpress).not(jmpress).filter(settings.stepSelector);\n		}\n		/**\n		 * Reselect the active step\n		 *\n		 * @param String type reason of reselecting step\n		 */\n		function reselect( type ) {\n			return select( { step: active, substep: activeSubstep }, type);\n		}\n		/**\n		 * Select a given step\n		 *\n		 * @param el element to select\n		 * @param type reason of changing step\n		 * @return Object element selected\n		 */\n		function select( el, type ) {\n			var substep;\n			if ( $.isPlainObject( el ) ) {\n				substep = el.substep;\n				el = el.step;\n			}\n			if ( typeof el === 'string') {\n				el = jmpress.find( el ).first();\n			}\n			if ( !el || !$(el).data('stepData') ) {\n				return false;\n			}\n\n			// Sometimes it's possible to trigger focus on first link with some keyboard action.\n			// Browser in such a case tries to scroll the page to make this element visible\n			// (even that body overflow is set to hidden) and it breaks our careful positioning.\n			//\n			// So, as a lousy (and lazy) workaround we will make the page scroll back to the top\n			// whenever slide is selected\n			//\n			// If you are reading this and know any better way to handle it, I'll be glad to hear about it!\n			scrollFix.call(this);\n\n			var step = $(el).data('stepData');\n\n			var cancelSelect = false;\n			callCallback.call(this, \"beforeChange\", el, {\n				stepData: step\n				,reason: type\n				,cancel: function() {\n					cancelSelect = true;\n				}\n			});\n			if (cancelSelect) {\n				return undefined;\n			}\n\n			var target = {};\n\n			var delegated = el;\n			if($(el).data(\"stepData\").delegate) {\n				delegated = $(el).parentsUntil(jmpress).filter(settings.stepSelector).filter(step.delegate) ||\n					$(el).near(step.delegate) ||\n					$(el).near(step.delegate, true) ||\n					$(step.delegate, jmpress);\n				step = delegated.data(\"stepData\");\n			}\n			if ( activeDelegated ) {\n				callCallback.call(this, 'setInactive', activeDelegated, {\n					stepData: $(activeDelegated).data('stepData')\n					,delegatedFrom: active\n					,reason: type\n					,target: target\n					,nextStep: delegated\n					,nextSubstep: substep\n					,nextStepData: step\n				} );\n			}\n			var callbackData = {\n				stepData: step\n				,delegatedFrom: el\n				,reason: type\n				,target: target\n				,substep: substep\n				,prevStep: activeDelegated\n				,prevSubstep: activeSubstep\n				,prevStepData: activeDelegated && $(activeDelegated).data('stepData')\n			};\n			callCallback.call(this, 'beforeActive', delegated, callbackData);\n			callCallback.call(this, 'setActive', delegated, callbackData);\n\n			// Set on step class on root element\n			if (current.jmpressClass) {\n				$(jmpress).removeClass(current.jmpressClass);\n			}\n			$(jmpress).addClass(current.jmpressClass = 'step-' + $(delegated).attr('id') );\n			if (current.jmpressDelegatedClass) {\n				$(jmpress).removeClass(current.jmpressDelegatedClass);\n			}\n			$(jmpress).addClass(current.jmpressDelegatedClass = 'delegating-step-' + $(el).attr('id') );\n\n			callCallback.call(this, \"applyTarget\", delegated, $.extend({\n				canvas: canvas\n				,area: area\n				,beforeActive: activeDelegated\n			}, callbackData));\n\n			active = el;\n			activeSubstep = callbackData.substep;\n			activeDelegated = delegated;\n\n			if(current.idleTimeout) {\n				clearTimeout(current.idleTimeout);\n			}\n			current.idleTimeout = setTimeout(function() {\n				callCallback.call(this, 'idle', delegated, callbackData);\n			}, Math.max(1, settings.transitionDuration - 100));\n\n			return delegated;\n		}\n		/**\n		 * This should fix ANY kind of buggy scrolling\n		 */\n		function scrollFix() {\n			function fix() {\n				if ($(container)[0].tagName === \"BODY\") {\n					window.scrollTo(0, 0);\n				}\n				$(container).scrollTop(0);\n				$(container).scrollLeft(0);\n				function check() {\n					if ($(container).scrollTop() !== 0 ||\n						$(container).scrollLeft() !== 0) {\n							fix();\n						}\n				}\n				setTimeout(check, 1);\n				setTimeout(check, 10);\n				setTimeout(check, 100);\n				setTimeout(check, 200);\n				setTimeout(check, 400);\n			}\n			fix();\n		}\n		/**\n		 * Alias for select\n		 */\n		function goTo( el ) {\n			return select.call(this, el, \"jump\" );\n		}\n		/**\n		 * Goto Next Slide\n		 *\n		 * @return Object newly active slide\n		 */\n		function next() {\n			return select.call(this, callCallback.call(this, 'selectNext', active, {\n				stepData: $(active).data('stepData')\n				,substep: activeSubstep\n			}), \"next\" );\n		}\n		/**\n		 * Goto Previous Slide\n		 *\n		 * @return Object newly active slide\n		 */\n		function prev() {\n			return select.call(this, callCallback.call(this, 'selectPrev', active, {\n				stepData: $(active).data('stepData')\n				,substep: activeSubstep\n			}), \"prev\" );\n		}\n		/**\n		 * Goto First Slide\n		 *\n		 * @return Object newly active slide\n		 */\n		function home() {\n			return select.call(this, callCallback.call(this, 'selectHome', active, {\n				stepData: $(active).data('stepData')\n			}), \"home\" );\n		}\n		/**\n		 * Goto Last Slide\n		 *\n		 * @return Object newly active slide\n		 */\n		function end() {\n			return select.call(this,   callCallback.call(this, 'selectEnd', active, {\n				stepData: $(active).data('stepData')\n			}), \"end\" );\n		}\n		/**\n		 * Manipulate the canvas\n		 *\n		 * @param props\n		 * @return Object\n		 */\n		function canvasMod( props ) {\n			css(canvas, props || {});\n			return $(canvas);\n		}\n		/**\n		 * Return current step\n		 *\n		 * @return Object\n		 */\n		function getActive() {\n			return activeDelegated && $(activeDelegated);\n		}\n		/**\n		 * fire a callback\n		 *\n		 * @param callbackName\n		 * @param element\n		 * @param eventData\n		 * @return void\n		 */\n		function fire( callbackName, element, eventData ) {\n			if( !callbacks[callbackName] ) {\n				$.error( \"callback \" + callbackName + \" is not registered.\" );\n			} else {\n				return callCallback.call(this, callbackName, element, eventData);\n			}\n		}\n\n		/**\n		 * PUBLIC METHODS LIST\n		 */\n		jmpress.data(\"jmpressmethods\", {\n			select: select\n			,reselect: reselect\n			,scrollFix: scrollFix\n			,goTo: goTo\n			,next: next\n			,prev: prev\n			,home: home\n			,end: end\n			,canvas: canvasMod\n			,container: function() { return container; }\n			,settings: function() { return settings; }\n			,active: getActive\n			,current: function() { return current; }\n			,fire: fire\n			,init: function(step) {\n				doStepInit.call(this, $(step), current.nextIdNumber++);\n			}\n			,deinit: function(step) {\n				if(step) {\n					doStepDeinit.call(this, $(step));\n				} else {\n					deinit.call(this);\n				}\n			}\n			,reapply: doStepReapply\n		});\n\n		/**\n		 * Check for support\n		 * This will be removed in near future, when support is coming\n		 *\n		 * @access protected\n		 * @return void\n		 */\n		function checkSupport() {\n			var ua = navigator.userAgent.toLowerCase();\n			var supported = ( ua.search(/(iphone)|(ipod)|(android)/) === -1 );\n			return supported;\n		}\n\n		// BEGIN INIT\n\n		// CHECK FOR SUPPORT\n		if (checkSupport() === false) {\n			if (settings.notSupportedClass) {\n				jmpress.addClass(settings.notSupportedClass);\n			}\n			return;\n		} else {\n			if (settings.notSupportedClass) {\n				jmpress.removeClass(settings.notSupportedClass);\n			}\n		}\n\n		// grabbing all steps\n		var steps = $(settings.stepSelector, jmpress);\n\n		// GERNERAL INIT OF FRAME\n		container = jmpress;\n		area = $('<div />');\n		canvas = $('<div />');\n		$(jmpress).children().filter(steps).each(function() {\n			canvas.append( $( this ) );\n		});\n		if(settings.fullscreen) {\n			container = $('body');\n			$(\"html\").css({\n				overflow: 'hidden'\n			});\n			area = jmpress;\n		}\n		oldStyle.area = area.attr(\"style\") || \"\";\n		oldStyle.container = container.attr(\"style\") || \"\";\n		if(settings.fullscreen) {\n			container.css({\n				height: '100%'\n			});\n			jmpress.append( canvas );\n		} else {\n			container.css({\n				position: \"relative\"\n			});\n			area.append( canvas );\n			jmpress.append( area );\n		}\n\n		$(container).addClass(settings.containerClass);\n		$(area).addClass(settings.areaClass);\n		$(canvas).addClass(settings.canvasClass);\n\n		document.documentElement.style.height = \"100%\";\n		container.css({\n			overflow: 'hidden'\n		});\n\n		var props = {\n			position: \"absolute\"\n			,transitionDuration: '0s'\n		};\n		props = $.extend({}, settings.animation, props);\n		css(area, props);\n		css(area, {\n			top: '50%'\n			,left: '50%'\n			,perspective: '1000px'\n		});\n		css(canvas, props);\n\n		current = {};\n\n		callCallback.call(this, 'beforeInit', null, {});\n\n		// INITIALIZE EACH STEP\n		steps.each(function( idx ) {\n			doStepInit.call(jmpress, this, idx );\n		});\n		current.nextIdNumber = steps.length;\n\n		callCallback.call(this, 'afterInit', null, {});\n\n		// START\n		select.call(this,  callCallback.call(this, 'selectInitialStep', \"init\", {}) );\n\n		if (settings.initClass) {\n			$(steps).removeClass(settings.initClass);\n		}\n	}\n	/**\n	 * Return default settings\n	 *\n	 * @return Object\n	 */\n	function getDefaults() {\n		return defaults;\n	}\n	/**\n	 * Register a callback or a jmpress function\n	 *\n	 * @access public\n	 * @param name String the name of the callback or function\n	 * @param func Function? the function to be added\n	 */\n	function register(name, func) {\n		if( $.isFunction(func) ) {\n			if( methods[name] ) {\n				$.error( \"function \" + name + \" is already registered.\" );\n			} else {\n				methods[name] = func;\n			}\n		} else {\n			if( callbacks[name] ) {\n				$.error( \"callback \" + name + \" is already registered.\" );\n			} else {\n				callbacks[name] = 1;\n				defaults[name] = [];\n			}\n		}\n	}\n	/**\n	 * Set CSS on element w/ prefixes\n	 *\n	 * @return Object element which properties were set\n	 *\n	 * TODO: Consider bypassing pfx and blindly set as jQuery\n	 * already checks for support\n	 */\n	function css( el, props ) {\n		var key, pkey, cssObj = {};\n		for ( key in props ) {\n			if ( props.hasOwnProperty(key) ) {\n				pkey = pfx(key);\n				if ( pkey !== null ) {\n					cssObj[pkey] = props[key];\n				}\n			}\n		}\n		$(el).css(cssObj);\n		return el;\n	}\n	/**\n	 * Return dataset for element\n	 *\n	 * @param el element\n	 * @return Object\n	 */\n	function dataset( el ) {\n		if ( $(el)[0].dataset ) {\n			return $.extend({}, $(el)[0].dataset);\n		}\n		function toCamelcase( str ) {\n			str = str.split( '-' );\n			for( var i = 1; i < str.length; i++ ) {\n				str[i] = str[i].substr(0, 1).toUpperCase() + str[i].substr(1);\n			}\n			return str.join( '' );\n		}\n		var returnDataset = {};\n		var attrs = $(el)[0].attributes;\n		$.each(attrs, function ( idx, attr ) {\n			if ( attr.nodeName.substr(0, 5) === \"data-\" ) {\n				returnDataset[ toCamelcase(attr.nodeName.substr(5)) ] = attr.nodeValue;\n			}\n		});\n		return returnDataset;\n	}\n	/**\n	 * Returns true, if jmpress is initialized\n	 *\n	 * @return bool\n	 */\n	function initialized() {\n		return !!$(this).data(\"jmpressmethods\");\n	}\n\n\n	/**\n	 * PUBLIC STATIC METHODS LIST\n	 */\n	var methods = {\n		init: init\n		,initialized: initialized\n		,deinit: function() {}\n		,css: css\n		,pfx: pfx\n		,defaults: getDefaults\n		,register: register\n		,dataset: dataset\n	};\n\n	/**\n	 * $.jmpress()\n	 */\n	$.fn.jmpress = function( method ) {\n		function f() {\n			var jmpressmethods = $(this).data(\"jmpressmethods\");\n			if ( jmpressmethods && jmpressmethods[method] ) {\n				if ( method.substr(0, 1) === '_' && jmpressmethods.settings().test === false) {\n					$.error( 'Method ' +  method + ' is protected and should only be used internally.' );\n				} else {\n					return jmpressmethods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));\n				}\n			} else if ( methods[method] ) {\n				if ( method.substr(0, 1) === '_' && defaults.test === false) {\n					$.error( 'Method ' +  method + ' is protected and should only be used internally.' );\n				} else {\n					return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));\n				}\n			} else if ( callbacks[method] && jmpressmethods ) {\n				var settings = jmpressmethods.settings();\n				var func = Array.prototype.slice.call( arguments, 1 )[0];\n				if ($.isFunction( func )) {\n					settings[method] = settings[method] || [];\n					settings[method].push(func);\n				}\n			} else if ( typeof method === 'object' || ! method ) {\n				return init.apply( this, arguments );\n			} else {\n				$.error( 'Method ' +  method + ' does not exist on jQuery.jmpress' );\n			}\n			// to allow chaining\n			return this;\n		}\n		var args = arguments;\n		var result;\n		$(this).each(function(idx, element) {\n			result = f.apply(element, args);\n		});\n		return result;\n	};\n	$.extend({\n		jmpress: function( method ) {\n			if ( methods[method] ) {\n				if ( method.substr(0, 1) === '_' && defaults.test === false) {\n					$.error( 'Method ' +  method + ' is protected and should only be used internally.' );\n				} else {\n					return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));\n				}\n			} else if ( callbacks[method] ) {\n				// plugin interface\n				var func = Array.prototype.slice.call( arguments, 1 )[0];\n				if ($.isFunction( func )) {\n					defaults[method].push(func);\n				} else {\n					$.error( 'Second parameter should be a function: $.jmpress( callbackName, callbackFunction )' );\n				}\n			} else {\n				$.error( 'Method ' +  method + ' does not exist on jQuery.jmpress' );\n			}\n		}\n	});\n\n}(jQuery, document, window));"},27:function(a,b,c){a.exports='/*!\n * demo.js\n * Extras for running the main jmpress.js demo\n */\n(function( $, document, window, undefined ) {\n\n	\'use strict\';\n\n	var pageviewTimeout;\n\n	$.jmpress(\'register\', \'demo\', function() {\n	\n		$.jmpress("apply", "#showcase-nested", {\n			x: 250\n			,y: -30\n			,rotate: { z: 20 }\n			,secondary: {\n				rotateZ: 90\n				,y: 30\n				,"": "siblings"\n			}\n			,scale: 0.3\n		});\n		$.jmpress("template", "main", { children: [\n			{\n				scale: 10\n				,z: 1\n			},\n			{\n				x: -800\n				,y: -1100\n				,rotate: -20\n				,scale: 1.2\n			},\n			{\n				x: -700\n				,y: -500\n				,rotate: -40\n				,scale: 1.4\n			},\n			{\n				x: 0\n				,y: 100\n				,rotate: -60\n				,scale: 1.6\n			},\n			{\n				x: 1000\n				,y: 200\n				,rotate: -95\n				,scale: 1.8\n			},\n			{\n				x: 1800\n				,y: -100\n				,rotate: -120\n				,scale: 2\n			},\n			{\n				x: 2500\n				,y: -900\n				,z: -350\n				,rotate: -160\n				,rotateX: 40\n				,scale: 2.2\n			},\n			{\n				x: 2600\n				,y: -2500\n				,rotate: -210\n				,scale: 2.6\n			}\n		]});\n		$(\'#jmpress\').jmpress("route", ".step:not(#home)");\n		var jmpressConfig = {\n			// SET THE VIEW PORT\n			viewPort: {\n				height: 600\n				,width: 1000\n				,maxScale: 1 // do not scale up\n			}\n			// SET THE ACTIVE SLIDE IN THE NAV\n			,setActive: function( slide ) {\n				$(\'#nav a\')\n					.removeClass( \'ui-state-active\' )\n					.parent( \'li\' )\n						.removeClass( \'active\' );\n				var id = $(slide).attr(\'id\');\n				var idArr = id.split("-");\n				id = "";\n				for(var i = 0; i < idArr.length; i ++) {\n					if ( id ) {\n						id += "-";\n					}\n					id += idArr[i];\n					$(\'#nav a[href=\\"#\' + id + \'\\"]\')\n						.addClass( \'ui-state-active\' )\n						.parent( \'li\' )\n							.addClass( \'active\' );\n				}\n\n				// Track each step as page\n				if(pageviewTimeout) {\n					clearTimeout(pageviewTimeout);\n				}\n				pageviewTimeout = setTimeout(function() {\n					_gaq.push([\'_trackPageview\', "/jmpress.js/step-" + id]);\n				}, 1500);\n			}\n			// UPON STEP LOAD/ENCODE CODE SAMPLES\n			,afterStepLoaded: function( step, eventData ) {\n				$(step).find(\'code:not(.noconvert)\').each(function() {\n					$(this).text($(this).html()).html();\n				});\n				$("pre").addClass(\'ui-state-default\');\n			}\n			,afterInit: function( nil, eventData ) {\n				$("#nav").css("opacity", 1);\n				$("#reinit-jmpress").hide();\n				$("#uninit-jmpress").show();\n				$("#global-next").show();\n				$("#global-prev").show();\n				$("#read-docs").show();\n				$("#docs").show();\n				$(\'#home\').find(\'.notinner\').attr(\'class\', \'inner\').wrap(\'<div class="intro-top ui-state-default" />\');\n				$(\'#home\').find(\'.intro-bottom\').show();\n			}\n			,afterDeinit: function( nil, eventData ) {\n				$("#nav").css("opacity", 0);\n				$("#jmpress").addClass("normal-mode");\n				$("#reinit-jmpress").show();\n				$("#uninit-jmpress").hide();\n				$("#global-next").hide();\n				$("#global-prev").hide();\n				$("#read-docs").hide();\n				$("#docs").hide();\n				$(\'#home\').find(\'.intro-top .inner\').attr(\'class\', \'notinner\').unwrap();\n				$(\'#home\').find(\'.intro-bottom\').hide();\n			}\n			,containerClass: "ui-widget-content"\n			,areaClass: ""\n			,canvasClass: ""\n			,initClass: "init-css"\n			,notSupportedClass: "normal-mode"\n			,presentationMode: { notesUrl: "index.notes.html" }\n		};\n		$(\'#jmpress\').jmpress("toggle", 27, jmpressConfig, true);\n		$(\'.next\').click(function() {\n			$(\'#jmpress\').jmpress(\'next\');\n			return false;\n		});\n		$(\'.prev\').click(function() {\n			$(\'#jmpress\').jmpress(\'prev\');\n			return false;\n		});\n		$(\'.nested-next\').click(function() {\n			$(\'#nested-jmpress\').jmpress(\'next\');\n			_gaq.push([\'_trackEvent\', \'Feature\', \'NestedJmpress\', "start"]);\n			return false;\n		});\n		$("#jmpress a[href], #global-next, #global-prev").addClass("ui-state-default ui-corner-all");\n		$("#nav a, #nav-themes a").addClass("ui-button ui-widget ui-state-default");\n		$("#nav a span").addClass("ui-button-text");\n		//$(\'#home .intro-top, #home .intro-bottom\').addClass(\'\');\n		$("#jmpress a[href], #nav a, #nav-themes a, #global-next, #global-prev").hover(function() {\n			$(this).addClass("ui-state-hover");\n		}, function() {\n			$(this).removeClass("ui-state-hover");\n		});\n		// HACK TO CHANGE HINT IF IPAD\n		var ua = navigator.userAgent.toLowerCase();\n		if ( ua.search(/(ipad)/) !== -1 ) {\n			$(\'.hint\').text(\'Swipe support is coming :)\');\n		}\n\n		$("a[data-theme]").click(function(event) {\n			var theme = $(this).data("theme");\n\n			$("#theme").remove();\n\n			var link = $("<link>");\n			link.attr({\n					id: "theme",\n					type: \'text/css\',\n					rel: \'stylesheet\',\n					href: "http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.17/themes/"+theme+"/jquery-ui.css"\n			});\n			$("head").append( link );\n\n			$("a[data-theme]").removeClass("ui-state-active");\n			$(this).addClass("ui-state-active");\n\n			_gaq.push([\'_trackEvent\', \'Feature\', \'Theme\', theme]);\n\n			event.preventDefault();\n		});\n		$("a[data-theme=start]").addClass("ui-state-active");\n		$("#uninit-jmpress").click(function(event) {\n			$("#jmpress").jmpress("deinit");\n			window.location.hash = "";\n			event.preventDefault();\n\n			_gaq.push([\'_trackEvent\', \'Feature\', \'Deinit\', "deinit"]);\n		});\n		$("#reinit-jmpress").click(function(event) {\n			$("#jmpress").jmpress(jmpressConfig);\n			event.preventDefault();\n\n			_gaq.push([\'_trackEvent\', \'Feature\', \'Deinit\', "reinit"]);\n		});\n		$("#nested-jmpress").jmpress({\n			viewPort: {\n				height: 200\n				,width: 1000\n			}\n			,duration: { defaultValue: 3500, barSelector: "#nested-jmpress-bar" }\n			,containerClass: "ui-widget-content"\n			,hash: { use: false }\n			,stepSelector: ".nested-step"\n			,fullscreen: false\n			,presentationMode: { use: false }\n		});\n		setTimeout(function() {\n			$("#jmpress").removeClass("init-css");\n		}, 500);\n	\n	});\n\n}(jQuery, document, window));'},28:function(a,b,c){a.exports='/*!\r\n * hash.js\r\n * Detect and set the URL hash\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n	var $jmpress = $.jmpress,\r\n		hashLink = "a[href^=#]";\r\n\r\n	/* FUNCTIONS */\r\n	function randomString() {\r\n		return "" + Math.round(Math.random() * 100000, 0);\r\n	}\r\n	/**\r\n	 * getElementFromUrl\r\n	 *\r\n	 * @return String or undefined\r\n	 */\r\n	function getElementFromUrl(settings) {\r\n		// get id from url # by removing `#` or `#/` from the beginning,\r\n		// so both "fallback" `#slide-id` and "enhanced" `#/slide-id` will work\r\n		// TODO SECURITY check user input to be valid!\r\n		try {\r\n			var el = $( \'#\' + window.location.hash.replace(/^#\\/?/,"") );\r\n			return el.length > 0 && el.is(settings.stepSelector) ? el : undefined;\r\n		} catch(e) {}\r\n	}\r\n	function setHash(stepid) {\r\n		var shouldBeHash = "#/" + stepid;\r\n		if(window.history && window.history.pushState) {\r\n			// shouldBeHash = "#" + stepid;\r\n			// consider this for future versions\r\n			//  it has currently issues, when startup with a link with hash (webkit)\r\n			if(window.location.hash !== shouldBeHash) {\r\n				window.history.pushState({}, \'\', shouldBeHash);\r\n			}\r\n		} else {\r\n			if(window.location.hash !== shouldBeHash) {\r\n				window.location.hash = shouldBeHash;\r\n			}\r\n		}\r\n	}\r\n\r\n	/* DEFAULTS */\r\n	$jmpress(\'defaults\').hash = {\r\n		use: true\r\n		,update: true\r\n		,bindChange: true\r\n		// NOTICE: {use: true, update: false, bindChange: true}\r\n		// will cause a error after clicking on a link to the current step\r\n	};\r\n\r\n	/* HOOKS */\r\n	$jmpress(\'selectInitialStep\', function( step, eventData ) {\r\n		var settings = eventData.settings,\r\n			hashSettings = settings.hash,\r\n			current = eventData.current,\r\n			jmpress = $(this);\r\n		eventData.current.hashNamespace = ".jmpress-"+randomString();\r\n		// HASH CHANGE EVENT\r\n		if ( hashSettings.use ) {\r\n			if ( hashSettings.bindChange ) {\r\n				$(window).bind(\'hashchange\'+current.hashNamespace, function(event) {\r\n					var urlItem = getElementFromUrl(settings);\r\n					if ( jmpress.jmpress(\'initialized\') ) {\r\n						jmpress.jmpress("scrollFix");\r\n					}\r\n					if(urlItem && urlItem.length) {\r\n						if(urlItem.attr("id") !== jmpress.jmpress("active").attr("id")) {\r\n							jmpress.jmpress(\'select\', urlItem);\r\n						}\r\n						setHash(urlItem.attr("id"));\r\n					}\r\n					event.preventDefault();\r\n				});\r\n				$(hashLink).on("click"+current.hashNamespace, function(event) {\r\n					var href = $(this).attr("href");\r\n					try {\r\n						if($(href).is(settings.stepSelector)) {\r\n							jmpress.jmpress("select", href);\r\n							event.preventDefault();\r\n							event.stopPropagation();\r\n						}\r\n					} catch(e) {}\r\n				});\r\n			}\r\n			return getElementFromUrl(settings);\r\n		}\r\n	});\r\n	$jmpress(\'afterDeinit\', function( nil, eventData ) {\r\n		$(hashLink).off(eventData.current.hashNamespace);\r\n		$(window).unbind(eventData.current.hashNamespace);\r\n	});\r\n	$jmpress(\'setActive\', function( step, eventData ) {\r\n		var settings = eventData.settings,\r\n			current = eventData.current;\r\n		// `#/step-id` is used instead of `#step-id` to prevent default browser\r\n		// scrolling to element in hash\r\n		if ( settings.hash.use && settings.hash.update ) {\r\n			clearTimeout(current.hashtimeout);\r\n			current.hashtimeout = setTimeout(function() {\r\n				setHash($(eventData.delegatedFrom).attr(\'id\'));\r\n			}, settings.transitionDuration + 200);\r\n		}\r\n	});\r\n\r\n}(jQuery, document, window));'},29:function(a,b,c){a.exports='/*!\r\n * jqevents.js\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n\r\n	/* FUNCTIONS */\r\n	function randomString() {\r\n		return "" + Math.round(Math.random() * 100000, 0);\r\n	}\r\n\r\n	/* HOOKS */\r\n	// the events should not bubble up the tree\r\n	// elsewise nested jmpress would cause buggy behavior\r\n	$.jmpress("setActive", function( step, eventData ) {\r\n		if(eventData.prevStep !== step) {\r\n			$(step).triggerHandler("enterStep");\r\n		}\r\n	});\r\n	$.jmpress("setInactive", function( step, eventData ) {\r\n		if(eventData.nextStep !== step) {\r\n			$(step).triggerHandler("leaveStep");\r\n		}\r\n	});\r\n\r\n}(jQuery, document, window));'},30:function(a,b,c){a.exports='/*!\r\n * keyboard.js\r\n * Keyboard event mapping and default keyboard actions\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n	var $jmpress = $.jmpress,\r\n		jmpressNext = "next",\r\n		jmpressPrev = "prev";\r\n\r\n	/* FUNCTIONS */\r\n	function randomString() {\r\n		return "" + Math.round(Math.random() * 100000, 0);\r\n	}\r\n	function stopEvent(event) {\r\n		event.preventDefault();\r\n		event.stopPropagation();\r\n	}\r\n\r\n	/* DEFAULTS */\r\n	$jmpress(\'defaults\').keyboard = {\r\n		use: true\r\n		,keys: {\r\n			33: jmpressPrev // pg up\r\n			,37: jmpressPrev // left\r\n			,38: jmpressPrev // up\r\n\r\n			,9: jmpressNext+":"+jmpressPrev // tab\r\n			,32: jmpressNext // space\r\n			,34: jmpressNext // pg down\r\n			,39: jmpressNext // right\r\n			,40: jmpressNext // down\r\n\r\n			,36: "home" // home\r\n\r\n			,35: "end" // end\r\n		}\r\n		,ignore: {\r\n			"INPUT": [\r\n				32 // space\r\n				,37 // left\r\n				,38 // up\r\n				,39 // right\r\n				,40 // down\r\n			]\r\n			,"TEXTAREA": [\r\n				32 // space\r\n				,37 // left\r\n				,38 // up\r\n				,39 // right\r\n				,40 // down\r\n			]\r\n			,"SELECT": [\r\n				38 // up\r\n				,40 // down\r\n			]\r\n		}\r\n		,tabSelector: "a[href]:visible, :input:visible"\r\n	};\r\n\r\n	/* HOOKS */\r\n	$jmpress(\'afterInit\', function( nil, eventData ) {\r\n		var settings = eventData.settings,\r\n			keyboardSettings = settings.keyboard,\r\n			ignoreKeyboardSettings = keyboardSettings.ignore,\r\n			current = eventData.current,\r\n			jmpress = $(this);\r\n\r\n		// tabindex make it focusable so that it can recieve key events\r\n		if(!settings.fullscreen) {\r\n			jmpress.attr("tabindex", 0);\r\n		}\r\n\r\n		current.keyboardNamespace = ".jmpress-"+randomString();\r\n\r\n		// KEYPRESS EVENT: this fixes a Opera bug\r\n		$(settings.fullscreen ? document : jmpress)\r\n			.bind("keypress"+current.keyboardNamespace, function( event ) {\r\n\r\n			for( var nodeName in ignoreKeyboardSettings ) {\r\n				if ( event.target.nodeName === nodeName && ignoreKeyboardSettings[nodeName].indexOf(event.which) !== -1 ) {\r\n					return;\r\n				}\r\n			}\r\n			if(event.which >= 37 && event.which <= 40 || event.which === 32) {\r\n				stopEvent(event);\r\n			}\r\n		});\r\n		// KEYDOWN EVENT\r\n		$(settings.fullscreen ? document : jmpress)\r\n			.bind("keydown"+current.keyboardNamespace, function( event ) {\r\n			var eventTarget = $(event.target);\r\n\r\n			if ( !settings.fullscreen && !eventTarget.closest(jmpress).length || !keyboardSettings.use ) {\r\n				return;\r\n			}\r\n\r\n			for( var nodeName in ignoreKeyboardSettings ) {\r\n				if ( eventTarget[0].nodeName === nodeName && ignoreKeyboardSettings[nodeName].indexOf(event.which) !== -1 ) {\r\n					return;\r\n				}\r\n			}\r\n\r\n			var reverseSelect = false;\r\n			var nextFocus;\r\n			if (event.which === 9) {\r\n				// tab\r\n				if ( !eventTarget.closest( jmpress.jmpress(\'active\') ).length ) {\r\n					if ( !event.shiftKey ) {\r\n						nextFocus = jmpress.jmpress(\'active\').find("a[href], :input").filter(":visible").first();\r\n					} else {\r\n						reverseSelect = true;\r\n					}\r\n				} else {\r\n					nextFocus = eventTarget.near( keyboardSettings.tabSelector, event.shiftKey );\r\n					if( !$(nextFocus)\r\n						.closest( settings.stepSelector )\r\n						.is(jmpress.jmpress(\'active\') ) ) {\r\n						nextFocus = undefined;\r\n					}\r\n				}\r\n				if( nextFocus && nextFocus.length > 0 ) {\r\n					nextFocus.focus();\r\n					jmpress.jmpress("scrollFix");\r\n					stopEvent(event);\r\n					return;\r\n				} else {\r\n					if(event.shiftKey) {\r\n						reverseSelect = true;\r\n					}\r\n				}\r\n			}\r\n\r\n			var action = keyboardSettings.keys[ event.which ];\r\n			if ( typeof action === "string" ) {\r\n				if (action.indexOf(":") !== -1) {\r\n					action = action.split(":");\r\n					action = event.shiftKey ? action[1] : action[0];\r\n				}\r\n				jmpress.jmpress( action );\r\n				stopEvent(event);\r\n			} else if ( $.isFunction(action) ) {\r\n				action.call(jmpress, event);\r\n			} else if ( action ) {\r\n				jmpress.jmpress.apply( jmpress, action );\r\n				stopEvent(event);\r\n			}\r\n\r\n			if (reverseSelect) {\r\n				// tab\r\n				nextFocus = jmpress.jmpress(\'active\').find("a[href], :input").filter(":visible").last();\r\n				nextFocus.focus();\r\n				jmpress.jmpress("scrollFix");\r\n			}\r\n		});\r\n	});\r\n	$jmpress(\'afterDeinit\', function( nil, eventData ) {\r\n		$(document).unbind(eventData.current.keyboardNamespace);\r\n	});\r\n\r\n\r\n}(jQuery, document, window));'},31:function(a,b,c){a.exports='/*!\r\n * mobile.js\r\n * Adds support for swipe on touch supported browsers\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n	var $jmpress = $.jmpress;\r\n\r\n	/* FUNCTIONS */\r\n	function randomString() {\r\n		return "" + Math.round(Math.random() * 100000, 0);\r\n	}\r\n\r\n	/* HOOKS */\r\n	$jmpress( \'afterInit\', function( step, eventData ) {\r\n		var settings = eventData.settings,\r\n			current = eventData.current,\r\n			jmpress = eventData.jmpress;\r\n		current.mobileNamespace = ".jmpress-"+randomString();\r\n		var data, start = [0,0];\r\n		$(settings.fullscreen ? document : jmpress)\r\n			.bind("touchstart"+current.mobileNamespace, function( event ) {\r\n\r\n			data = event.originalEvent.touches[0];\r\n			start = [ data.pageX, data.pageY ];\r\n\r\n		}).bind("touchmove"+current.mobileNamespace, function( event ) {\r\n			data = event.originalEvent.touches[0];\r\n			event.preventDefault();\r\n			return false;\r\n		}).bind("touchend"+current.mobileNamespace, function( event ) {\r\n			var end = [ data.pageX, data.pageY ],\r\n				diff = [ end[0]-start[0], end[1]-start[1] ];\r\n\r\n			if(Math.max(Math.abs(diff[0]), Math.abs(diff[1])) > 50) {\r\n				diff = Math.abs(diff[0]) > Math.abs(diff[1]) ? diff[0] : diff[1];\r\n				$(jmpress).jmpress(diff > 0 ? "prev" : "next");\r\n				event.preventDefault();\r\n				return false;\r\n			}\r\n		});\r\n	});\r\n	$jmpress(\'afterDeinit\', function( nil, eventData ) {\r\n		var settings = eventData.settings,\r\n			current = eventData.current,\r\n			jmpress = eventData.jmpress;\r\n		$(settings.fullscreen ? document : jmpress).unbind(current.mobileNamespace);\r\n	});\r\n\r\n}(jQuery, document, window));'},32:function(a,b,c){a.exports='/*!\r\n * mouse.js\r\n * Clicking to select a step\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n	var $jmpress = $.jmpress;\r\n\r\n	/* FUNCTIONS */\r\n	function randomString() {\r\n		return "" + Math.round(Math.random() * 100000, 0);\r\n	}\r\n\r\n	/* DEFAULTS */\r\n	$jmpress("defaults").mouse = {\r\n		clickSelects: true\r\n	};\r\n\r\n	/* HOOKS */\r\n	$jmpress("afterInit", function( nil, eventData ) {\r\n		var settings = eventData.settings,\r\n			stepSelector = settings.stepSelector,\r\n			current = eventData.current,\r\n			jmpress = $(this);\r\n		current.clickableStepsNamespace = ".jmpress-"+randomString();\r\n		jmpress.bind("click"+current.clickableStepsNamespace, function(event) {\r\n			if (!settings.mouse.clickSelects || current.userZoom) {\r\n				return;\r\n			}\r\n\r\n			// get clicked step\r\n			var clickedStep = $(event.target).closest(stepSelector);\r\n\r\n			// clicks on the active step do default\r\n			if ( clickedStep.is( jmpress.jmpress("active") ) ) {\r\n				return;\r\n			}\r\n\r\n			if (clickedStep.length) {\r\n				// select the clicked step\r\n				jmpress.jmpress("select", clickedStep[0], "click");\r\n				event.preventDefault();\r\n				event.stopPropagation();\r\n			}\r\n		});\r\n	});\r\n	$jmpress(\'afterDeinit\', function( nil, eventData ) {\r\n		$(this).unbind(eventData.current.clickableStepsNamespace);\r\n	});\r\n\r\n}(jQuery, document, window));'},33:function(a,b,c){a.exports='/*!\r\n * near.js\r\n * Find steps near each other\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n\r\n	// add near( selector, backwards = false) to jquery\r\n\r\n\r\n	function checkAndGo( elements, func, selector, backwards ) {\r\n		var next;\r\n		elements.each(function(idx, element) {\r\n			if(backwards) {\r\n				next = func(element, selector, backwards);\r\n				if (next) {\r\n					return false;\r\n				}\r\n			}\r\n			if( $(element).is(selector) ) {\r\n				next = element;\r\n				return false;\r\n			}\r\n			if(!backwards) {\r\n				next = func(element, selector, backwards);\r\n				if (next) {\r\n					return false;\r\n				}\r\n			}\r\n		});\r\n		return next;\r\n	}\r\n	function findNextInChildren(item, selector, backwards) {\r\n		var children = $(item).children();\r\n		if(backwards) {\r\n			children = $(children.get().reverse());\r\n		}\r\n		return checkAndGo( children, findNextInChildren, selector, backwards );\r\n	}\r\n	function findNextInSiblings(item, selector, backwards) {\r\n		return checkAndGo(\r\n			$(item)[backwards ? "prevAll" : "nextAll"](),\r\n			findNextInChildren, selector, backwards );\r\n	}\r\n	function findNextInParents(item, selector, backwards) {\r\n		var next;\r\n		var parents = $(item).parents();\r\n		parents = $(parents.get());\r\n		$.each(parents.get(), function(idx, element) {\r\n			if( backwards && $(element).is(selector) ) {\r\n				next = element;\r\n				return false;\r\n			}\r\n			next = findNextInSiblings(element, selector, backwards);\r\n			if(next) {\r\n				return false;\r\n			}\r\n		});\r\n		return next;\r\n	}\r\n\r\n	$.fn.near = function( selector, backwards ) {\r\n		var array = [];\r\n		$(this).each(function(idx, element) {\r\n			var near = (backwards ?\r\n					false :\r\n					findNextInChildren( element, selector, backwards )) ||\r\n				findNextInSiblings( element, selector, backwards ) ||\r\n				findNextInParents( element, selector, backwards );\r\n			if( near ) {\r\n				array.push(near);\r\n			}\r\n		});\r\n		return $(array);\r\n	};\r\n}(jQuery, document, window));'},34:function(a,b,c){a.exports="/*!\r\n * start.js\r\n * Set the first step to start on\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	'use strict';\r\n\r\n	/* HOOKS */\r\n	$.jmpress( 'selectInitialStep', function( nil, eventData ) {\r\n		return eventData.settings.start;\r\n	});\r\n\r\n}(jQuery, document, window));"},35:function(a,b,c){a.exports='/*!\r\n * templates.js\r\n * The amazing template engine\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n	var $jmpress = $.jmpress,\r\n		templateFromParentIdent = "_template_",\r\n		templateFromApplyIdent = "_applied_template_";\r\n\r\n	/* STATIC VARS */\r\n	var templates = {};\r\n\r\n	/* FUNCTIONS */\r\n	function randomString() {\r\n		return "" + Math.round(Math.random() * 100000, 0);\r\n	}\r\n	function addUndefined( target, values, prefix ) {\r\n		for( var name in values ) {\r\n			var targetName = name;\r\n			if ( prefix ) {\r\n				targetName = prefix + targetName.substr(0, 1).toUpperCase() + targetName.substr(1);\r\n			}\r\n			if ( $.isPlainObject(values[name]) ) {\r\n				addUndefined( target, values[name], targetName );\r\n			} else if( target[targetName] === undefined ) {\r\n				target[targetName] = values[name];\r\n			}\r\n		}\r\n	}\r\n	function applyChildrenTemplates( children, templateChildren ) {\r\n		if ($.isArray(templateChildren)) {\r\n			if (templateChildren.length < children.length) {\r\n				$.error("more nested steps than children in template");\r\n			} else {\r\n				children.each(function(idx, child) {\r\n					child = $(child);\r\n					var tmpl = child.data(templateFromParentIdent) || {};\r\n					addUndefined(tmpl, templateChildren[idx]);\r\n					child.data(templateFromParentIdent, tmpl);\r\n				});\r\n			}\r\n		} else if($.isFunction(templateChildren)) {\r\n			children.each(function(idx, child) {\r\n				child = $(child);\r\n				var tmpl = child.data(templateFromParentIdent) || {};\r\n				addUndefined(tmpl, templateChildren(idx, child, children));\r\n				child.data(templateFromParentIdent, tmpl);\r\n			});\r\n		} // TODO: else if(object)\r\n	}\r\n	function applyTemplate( data, element, template, eventData ) {\r\n		if (template.children) {\r\n			var children = element.children( eventData.settings.stepSelector );\r\n			applyChildrenTemplates( children, template.children );\r\n		}\r\n		applyTemplateData( data, template );\r\n	}\r\n	function applyTemplateData( data, template ) {\r\n		addUndefined(data, template);\r\n	}\r\n\r\n	/* HOOKS */\r\n	$jmpress("beforeInitStep", function( step, eventData ) {\r\n		step = $(step);\r\n		var data = eventData.data,\r\n			templateFromAttr = data.template,\r\n			templateFromApply = step.data(templateFromApplyIdent),\r\n			templateFromParent = step.data(templateFromParentIdent);\r\n		if(templateFromAttr) {\r\n			$.each(templateFromAttr.split(" "), function(idx, tmpl) {\r\n				var template = templates[tmpl];\r\n				applyTemplate( data, step, template, eventData );\r\n			});\r\n		}\r\n		if (templateFromApply) {\r\n			applyTemplate( data, step, templateFromApply, eventData );\r\n		}\r\n		if (templateFromParent) {\r\n			applyTemplate( data, step, templateFromParent, eventData );\r\n			step.data(templateFromParentIdent, null);\r\n			if(templateFromParent.template) {\r\n				$.each(templateFromParent.template.split(" "), function(idx, tmpl) {\r\n					var template = templates[tmpl];\r\n					applyTemplate( data, step, template, eventData );\r\n				});\r\n			}\r\n		}\r\n	});\r\n	$jmpress("beforeInit", function( nil, eventData ) {\r\n		var data = $jmpress("dataset", this),\r\n			dataTemplate = data.template,\r\n			stepSelector = eventData.settings.stepSelector;\r\n		if (dataTemplate) {\r\n			var template = templates[dataTemplate];\r\n			applyChildrenTemplates( $(this).find(stepSelector).filter(function() {\r\n				return !$(this).parent().is(stepSelector);\r\n			}), template.children );\r\n		}\r\n	});\r\n\r\n	/* EXPORTED FUNCTIONS */\r\n	$jmpress("register", "template", function( name, tmpl ) {\r\n		if (templates[name]) {\r\n			templates[name] = $.extend(true, {}, templates[name], tmpl);\r\n		} else {\r\n			templates[name] = $.extend(true, {}, tmpl);\r\n		}\r\n	});\r\n	$jmpress("register", "apply", function( selector, tmpl ) {\r\n		if( !tmpl ) {\r\n			// TODO ERROR because settings not found\r\n			var stepSelector = $(this).jmpress("settings").stepSelector;\r\n			applyChildrenTemplates( $(this).find(stepSelector).filter(function() {\r\n				return !$(this).parent().is(stepSelector);\r\n			}), selector );\r\n		} else if($.isArray(tmpl)) {\r\n			applyChildrenTemplates( $(selector), tmpl );\r\n		} else {\r\n			var template;\r\n			if(typeof tmpl === "string") {\r\n				template = templates[tmpl];\r\n			} else {\r\n				template = $.extend(true, {}, tmpl);\r\n			}\r\n			$(selector).each(function(idx, element) {\r\n				element = $(element);\r\n				var tmpl = element.data(templateFromApplyIdent) || {};\r\n				addUndefined(tmpl, template);\r\n				element.data(templateFromApplyIdent, tmpl);\r\n			});\r\n		}\r\n	});\r\n\r\n}(jQuery, document, window));'},36:function(a,b,c){a.exports='/*!\r\n * transform.js\r\n * The engine that powers the transforms or falls back to other methods\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n\r\n	/* FUNCTIONS */\r\n	function randomString() {\r\n		return "" + Math.round(Math.random() * 100000, 0);\r\n	}\r\n	function toCssNumber(number) {\r\n		return (Math.round(10000*number)/10000)+"";\r\n	}\r\n\r\n	/**\r\n	 * 3D and 2D engines\r\n	 */\r\n	var engines = {\r\n		3: {\r\n			transform: function( el, data ) {\r\n				var transform = \'translate(-50%,-50%)\';\r\n				$.each(data, function(idx, item) {\r\n					var coord = ["X", "Y", "Z"];\r\n					var i;\r\n					if(item[0] === "translate") { // ["translate", x, y, z]\r\n						transform += " translate3d(" + toCssNumber(item[1] || 0) + "px," + toCssNumber(item[2] || 0) + "px," + toCssNumber(item[3] || 0) + "px)";\r\n					} else if(item[0] === "rotate") {\r\n						var order = item[4] ? [1, 2, 3] : [3, 2, 1];\r\n						for(i = 0; i < 3; i++) {\r\n							transform += " rotate" + coord[order[i]-1] + "(" + toCssNumber(item[order[i]] || 0) + "deg)";\r\n						}\r\n					} else if(item[0] === "scale") {\r\n						for(i = 0; i < 3; i++) {\r\n							transform += " scale" + coord[i] + "(" + toCssNumber(item[i+1] || 1) + ")";\r\n						}\r\n					}\r\n				});\r\n				$.jmpress("css", el, $.extend({}, { transform: transform }));\r\n			}\r\n		}\r\n		,2: {\r\n			transform: function( el, data ) {\r\n				var transform = \'translate(-50%,-50%)\';\r\n				$.each(data, function(idx, item) {\r\n					var coord = ["X", "Y"];\r\n					if(item[0] === "translate") { // ["translate", x, y, z]\r\n						transform += " translate(" + toCssNumber(item[1] || 0) + "px," + toCssNumber(item[2] || 0) + "px)";\r\n					} else if(item[0] === "rotate") {\r\n						transform += " rotate(" + toCssNumber(item[3] || 0) + "deg)";\r\n					} else if(item[0] === "scale") {\r\n						for(var i = 0; i < 2; i++) {\r\n							transform += " scale" + coord[i] + "(" + toCssNumber(item[i+1] || 1) + ")";\r\n						}\r\n					}\r\n				});\r\n				$.jmpress("css", el, $.extend({}, { transform: transform }));\r\n			}\r\n		}\r\n		,1: {\r\n			// CHECK IF SUPPORT IS REALLY NEEDED?\r\n			// this not even work without scaling...\r\n			// it may better to display the normal view\r\n			transform: function( el, data ) {\r\n				var anitarget = { top: 0, left: 0 };\r\n				$.each(data, function(idx, item) {\r\n					var coord = ["X", "Y"];\r\n					if(item[0] === "translate") { // ["translate", x, y, z]\r\n						anitarget.left = Math.round(item[1] || 0) + "px";\r\n						anitarget.top = Math.round(item[2] || 0) + "px";\r\n					}\r\n				});\r\n				el.animate(anitarget, 1000); // TODO: Use animation duration\r\n			}\r\n		}\r\n	};\r\n\r\n	/**\r\n	 * Engine to power cross-browser translate, scale and rotate.\r\n	 */\r\n	var engine = (function() {\r\n		if ($.jmpress("pfx", "perspective")) {\r\n			return engines[3];\r\n		} else if ($.jmpress("pfx", "transform")) {\r\n			return engines[2];\r\n		} else {\r\n			// CHECK IF SUPPORT IS REALLY NEEDED?\r\n			return engines[1];\r\n		}\r\n	}());\r\n\r\n	$.jmpress("defaults").reasonableAnimation = {};\r\n	$.jmpress("initStep", function( step, eventData ) {\r\n		var data = eventData.data;\r\n		var stepData = eventData.stepData;\r\n		var pf = parseFloat;\r\n		$.extend(stepData, {\r\n			x: pf(data.x) || 0\r\n			,y: pf(data.y) || 0\r\n			,z: pf(data.z) || 0\r\n			,r: pf(data.r) || 0\r\n			,phi: pf(data.phi) || 0\r\n			,rotate: pf(data.rotate) || 0\r\n			,rotateX: pf(data.rotateX) || 0\r\n			,rotateY: pf(data.rotateY) || 0\r\n			,rotateZ: pf(data.rotateZ) || 0\r\n			,revertRotate: false\r\n			,scale: pf(data.scale) || 1\r\n			,scaleX: pf(data.scaleX) || false\r\n			,scaleY: pf(data.scaleY) || false\r\n			,scaleZ: pf(data.scaleZ) || 1\r\n		});\r\n	});\r\n	$.jmpress("afterInit", function( nil, eventData ) {\r\n		var stepSelector = eventData.settings.stepSelector,\r\n			current = eventData.current;\r\n		current.perspectiveScale = 1;\r\n		current.maxNestedDepth = 0;\r\n		var nestedSteps = $(eventData.jmpress).find(stepSelector).children(stepSelector);\r\n		while(nestedSteps.length) {\r\n			current.maxNestedDepth++;\r\n			nestedSteps = nestedSteps.children(stepSelector);\r\n		}\r\n	});\r\n	$.jmpress("applyStep", function( step, eventData ) {\r\n		$.jmpress("css", $(step), {\r\n			position: "absolute"\r\n			,transformStyle: "preserve-3d"\r\n		});\r\n		if ( eventData.parents.length > 0 ) {\r\n			$.jmpress("css", $(step), {\r\n				top: "50%"\r\n				,left: "50%"\r\n			});\r\n		}\r\n		var sd = eventData.stepData;\r\n		var transform = [\r\n			["translate",\r\n				sd.x || (sd.r * Math.sin(sd.phi*Math.PI/180)),\r\n				sd.y || (-sd.r * Math.cos(sd.phi*Math.PI/180)),\r\n				sd.z],\r\n			["rotate",\r\n				sd.rotateX,\r\n				sd.rotateY,\r\n				sd.rotateZ || sd.rotate,\r\n				true],\r\n			["scale",\r\n				sd.scaleX || sd.scale,\r\n				sd.scaleY || sd.scale,\r\n				sd.scaleZ || sd.scale]\r\n		];\r\n		engine.transform( step, transform );\r\n	});\r\n	$.jmpress("setActive", function( element, eventData ) {\r\n		var target = eventData.target;\r\n		var step = eventData.stepData;\r\n		var tf = target.transform = [];\r\n		target.perspectiveScale = 1;\r\n\r\n		for(var i = eventData.current.maxNestedDepth; i > (eventData.parents.length || 0); i--) {\r\n			tf.push(["scale"], ["rotate"], ["translate"]);\r\n		}\r\n\r\n		tf.push(["scale",\r\n			1 / (step.scaleX || step.scale),\r\n			1 / (step.scaleY || step.scale),\r\n			1 / (step.scaleZ)]);\r\n		tf.push(["rotate",\r\n			-step.rotateX,\r\n			-step.rotateY,\r\n			-(step.rotateZ || step.rotate)]);\r\n		tf.push(["translate",\r\n			-(step.x || (step.r * Math.sin(step.phi*Math.PI/180))),\r\n			-(step.y || (-step.r * Math.cos(step.phi*Math.PI/180))),\r\n			-step.z]);\r\n		target.perspectiveScale *= (step.scaleX || step.scale);\r\n\r\n		$.each(eventData.parents, function(idx, element) {\r\n			var step = $(element).data("stepData");\r\n			tf.push(["scale",\r\n				1 / (step.scaleX || step.scale),\r\n				1 / (step.scaleY || step.scale),\r\n				1 / (step.scaleZ)]);\r\n			tf.push(["rotate",\r\n				-step.rotateX,\r\n				-step.rotateY,\r\n				-(step.rotateZ || step.rotate)]);\r\n			tf.push(["translate",\r\n				-(step.x || (step.r * Math.sin(step.phi*Math.PI/180))),\r\n				-(step.y || (-step.r * Math.cos(step.phi*Math.PI/180))),\r\n				-step.z]);\r\n			target.perspectiveScale *= (step.scaleX || step.scale);\r\n		});\r\n\r\n		$.each(tf, function(idx, item) {\r\n			if(item[0] !== "rotate") {\r\n				return;\r\n			}\r\n			function lowRotate(name) {\r\n				if(eventData.current["rotate"+name+"-"+idx] === undefined) {\r\n					eventData.current["rotate"+name+"-"+idx] = item[name] || 0;\r\n				}\r\n				var cur = eventData.current["rotate"+name+"-"+idx], tar = item[name] || 0,\r\n					curmod = cur % 360, tarmod = tar % 360;\r\n				if(curmod < 0) {\r\n					curmod += 360;\r\n				}\r\n				if(tarmod < 0) {\r\n					tarmod += 360;\r\n				}\r\n				var diff = tarmod - curmod;\r\n				if(diff < -180) {\r\n					diff += 360;\r\n				} else if(diff > 180) {\r\n					diff -= 360;\r\n				}\r\n				eventData.current["rotate"+name+"-"+idx] = item[name] = cur + diff;\r\n			}\r\n			lowRotate(1);\r\n			lowRotate(2);\r\n			lowRotate(3);\r\n		});\r\n	});\r\n	$.jmpress("applyTarget", function( active, eventData ) {\r\n\r\n		var target = eventData.target,\r\n			props, step = eventData.stepData,\r\n			settings = eventData.settings,\r\n			zoomin = target.perspectiveScale * 1.3 < eventData.current.perspectiveScale,\r\n			zoomout = target.perspectiveScale > eventData.current.perspectiveScale * 1.3;\r\n\r\n		// extract first scale from transform\r\n		var lastScale = -1;\r\n		$.each(target.transform, function(idx, item) {\r\n			if(item.length <= 1) {\r\n				return;\r\n			}\r\n			if(item[0] === "rotate" &&\r\n				item[1] % 360 === 0  &&\r\n				item[2] % 360 === 0  &&\r\n				item[3] % 360 === 0) {\r\n				return;\r\n			}\r\n			if(item[0] === "scale") {\r\n				lastScale = idx;\r\n			} else {\r\n				return false;\r\n			}\r\n		});\r\n\r\n		if(lastScale !== eventData.current.oldLastScale) {\r\n			zoomin = zoomout = false;\r\n			eventData.current.oldLastScale = lastScale;\r\n		}\r\n\r\n		var extracted = [];\r\n		if(lastScale !== -1) {\r\n			while(lastScale >= 0) {\r\n				if(target.transform[lastScale][0] === "scale") {\r\n					extracted.push(target.transform[lastScale]);\r\n					target.transform[lastScale] = ["scale"];\r\n				}\r\n				lastScale--;\r\n			}\r\n		}\r\n\r\n		var animation = settings.animation;\r\n		if(settings.reasonableAnimation[eventData.reason]) {\r\n			animation = $.extend({},\r\n				animation,\r\n				settings.reasonableAnimation[eventData.reason]);\r\n		}\r\n\r\n		props = {\r\n			// to keep the perspective look similar for different scales\r\n			// we need to \'scale\' the perspective, too\r\n			perspective: Math.round(target.perspectiveScale * 1000) + "px"\r\n		};\r\n		props = $.extend({}, animation, props);\r\n		if (!zoomin) {\r\n			props.transitionDelay = \'0s\';\r\n		}\r\n		if (!eventData.beforeActive) {\r\n			props.transitionDuration = \'0s\';\r\n			props.transitionDelay = \'0s\';\r\n		}\r\n		$.jmpress("css", eventData.area, props);\r\n		engine.transform(eventData.area, extracted);\r\n\r\n		props = $.extend({}, animation);\r\n		if (!zoomout) {\r\n			props.transitionDelay = \'0s\';\r\n		}\r\n		if (!eventData.beforeActive) {\r\n			props.transitionDuration = \'0s\';\r\n			props.transitionDelay = \'0s\';\r\n		}\r\n\r\n		eventData.current.perspectiveScale = target.perspectiveScale;\r\n\r\n		$.jmpress("css", eventData.canvas, props);\r\n		engine.transform(eventData.canvas, target.transform);\r\n	});\r\n\r\n}(jQuery, document, window));'},37:function(a,b,c){a.exports='/*!\r\n * viewport.js\r\n * Scale to fit a given viewport\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n\r\n	function randomString() {\r\n		return "" + Math.round(Math.random() * 100000, 0);\r\n	}\r\n\r\n	var defaults = $.jmpress("defaults");\r\n	defaults.viewPort = {\r\n		width: false\r\n		,height: false\r\n		,maxScale: 0\r\n		,minScale: 0\r\n		,zoomable: 0\r\n		,zoomBindMove: true\r\n		,zoomBindWheel: true\r\n	};\r\n	var keys = defaults.keyboard.keys;\r\n	keys[$.browser.mozilla?107:187] = "zoomIn";  // +\r\n	keys[$.browser.mozilla?109:189] = "zoomOut"; // -\r\n	defaults.reasonableAnimation.resize = {\r\n		transitionDuration: \'0s\'\r\n		,transitionDelay: \'0ms\'\r\n	};\r\n	defaults.reasonableAnimation.zoom = {\r\n		transitionDuration: \'0s\'\r\n		,transitionDelay: \'0ms\'\r\n	};\r\n	$.jmpress("initStep", function( step, eventData ) {\r\n		for(var variable in {"viewPortHeight":1, "viewPortWidth":1, "viewPortMinScale":1, "viewPortMaxScale":1, "viewPortZoomable":1}) {\r\n			eventData.stepData[variable] = eventData.data[variable] && parseFloat(eventData.data[variable]);\r\n		}\r\n	});\r\n	$.jmpress("afterInit", function( nil, eventData ) {\r\n		var jmpress = this;\r\n		eventData.current.viewPortNamespace = ".jmpress-"+randomString();\r\n		$(window).bind("resize"+eventData.current.viewPortNamespace, function (event) {\r\n			$(jmpress).jmpress("reselect", "resize");\r\n		});\r\n		eventData.current.userZoom = 0;\r\n		eventData.current.userTranslateX = 0;\r\n		eventData.current.userTranslateY = 0;\r\n		if(eventData.settings.viewPort.zoomBindWheel) {\r\n			$(eventData.settings.fullscreen ? document : this)\r\n				.bind("mousewheel"+eventData.current.viewPortNamespace, function( event, delta ) {\r\n				delta = delta || event.originalEvent.wheelDelta;\r\n				var direction = (delta / Math.abs(delta));\r\n				if(direction < 0) {\r\n					$(eventData.jmpress).jmpress("zoomOut", event.originalEvent.x, event.originalEvent.y);\r\n				} else if(direction > 0) {\r\n					$(eventData.jmpress).jmpress("zoomIn", event.originalEvent.x, event.originalEvent.y);\r\n				}\r\n			});\r\n		}\r\n		if(eventData.settings.viewPort.zoomBindMove) {\r\n			$(eventData.settings.fullscreen ? document : this).bind("mousedown"+eventData.current.viewPortNamespace, function (event) {\r\n				if(eventData.current.userZoom) {\r\n					eventData.current.userTranslating = { x: event.clientX, y: event.clientY };\r\n					event.preventDefault();\r\n					event.stopImmediatePropagation();\r\n				}\r\n			}).bind("mousemove"+eventData.current.viewPortNamespace, function (event) {\r\n				var userTranslating = eventData.current.userTranslating;\r\n				if(userTranslating) {\r\n					$(jmpress).jmpress("zoomTranslate", event.clientX - userTranslating.x, event.clientY - userTranslating.y);\r\n					userTranslating.x = event.clientX;\r\n					userTranslating.y = event.clientY;\r\n					event.preventDefault();\r\n					event.stopImmediatePropagation();\r\n				}\r\n			}).bind("mouseup"+eventData.current.viewPortNamespace, function (event) {\r\n				if(eventData.current.userTranslating) {\r\n					eventData.current.userTranslating = undefined;\r\n					event.preventDefault();\r\n					event.stopImmediatePropagation();\r\n				}\r\n			});\r\n		}\r\n	});\r\n	function maxAbs(value, range) {\r\n		return Math.max(Math.min(value, range), -range);\r\n	}\r\n	function zoom(x, y, direction) {\r\n		var current = $(this).jmpress("current"),\r\n			settings = $(this).jmpress("settings"),\r\n			stepData = $(this).jmpress("active").data("stepData"),\r\n			container = $(this).jmpress("container");\r\n		if(current.userZoom === 0 && direction < 0) {\r\n			return;\r\n		}\r\n		var zoomableSteps = stepData.viewPortZoomable || settings.viewPort.zoomable;\r\n		if(current.userZoom === zoomableSteps && direction > 0) {\r\n			return;\r\n		}\r\n		current.userZoom += direction;\r\n\r\n		var halfWidth = $(container).innerWidth()/2,\r\n			halfHeight = $(container).innerHeight()/2;\r\n\r\n		x = x ? x - halfWidth : x;\r\n		y = y ? y - halfHeight : y;\r\n\r\n		// TODO this is not perfect... too much math... :(\r\n		current.userTranslateX =\r\n			maxAbs(current.userTranslateX - direction * x / current.zoomOriginWindowScale / zoomableSteps,\r\n			halfWidth * current.userZoom * current.userZoom / zoomableSteps);\r\n		current.userTranslateY =\r\n			maxAbs(current.userTranslateY - direction * y / current.zoomOriginWindowScale / zoomableSteps,\r\n			halfHeight * current.userZoom * current.userZoom / zoomableSteps);\r\n\r\n		$(this).jmpress("reselect", "zoom");\r\n	}\r\n	$.jmpress("register", "zoomIn", function(x, y) {\r\n		zoom.call(this, x||0, y||0, 1);\r\n	});\r\n	$.jmpress("register", "zoomOut", function(x, y) {\r\n		zoom.call(this, x||0, y||0, -1);\r\n	});\r\n	$.jmpress("register", "zoomTranslate", function(x, y) {\r\n		var current = $(this).jmpress("current"),\r\n			settings = $(this).jmpress("settings"),\r\n			stepData = $(this).jmpress("active").data("stepData"),\r\n			container = $(this).jmpress("container");\r\n		var zoomableSteps = stepData.viewPortZoomable || settings.viewPort.zoomable;\r\n		var halfWidth = $(container).innerWidth(),\r\n			halfHeight = $(container).innerHeight();\r\n		current.userTranslateX =\r\n			maxAbs(current.userTranslateX + x / current.zoomOriginWindowScale,\r\n			halfWidth * current.userZoom * current.userZoom / zoomableSteps);\r\n		current.userTranslateY =\r\n			maxAbs(current.userTranslateY + y / current.zoomOriginWindowScale,\r\n			halfHeight * current.userZoom * current.userZoom / zoomableSteps);\r\n		$(this).jmpress("reselect", "zoom");\r\n	});\r\n	$.jmpress(\'afterDeinit\', function( nil, eventData ) {\r\n		$(window).unbind(eventData.current.viewPortNamespace);\r\n	});\r\n	$.jmpress("setActive", function( step, eventData ) {\r\n		var viewPort = eventData.settings.viewPort;\r\n		var viewPortHeight = eventData.stepData.viewPortHeight || viewPort.height;\r\n		var viewPortWidth = eventData.stepData.viewPortWidth || viewPort.width;\r\n		var viewPortMaxScale = eventData.stepData.viewPortMaxScale || viewPort.maxScale;\r\n		var viewPortMinScale = eventData.stepData.viewPortMinScale || viewPort.minScale;\r\n		// Correct the scale based on the window\'s size\r\n		var windowScaleY = viewPortHeight && $(eventData.container).innerHeight()/viewPortHeight;\r\n		var windowScaleX = viewPortWidth && $(eventData.container).innerWidth()/viewPortWidth;\r\n		var windowScale = (windowScaleX || windowScaleY) && Math.min( windowScaleX || windowScaleY, windowScaleY || windowScaleX );\r\n\r\n		if(windowScale) {\r\n			windowScale = windowScale || 1;\r\n			if(viewPortMaxScale) {\r\n				windowScale = Math.min(windowScale, viewPortMaxScale);\r\n			}\r\n			if(viewPortMinScale) {\r\n				windowScale = Math.max(windowScale, viewPortMinScale);\r\n			}\r\n\r\n			var zoomableSteps = eventData.stepData.viewPortZoomable || eventData.settings.viewPort.zoomable;\r\n			if(zoomableSteps) {\r\n				var diff = (1/windowScale) - (1/viewPortMaxScale);\r\n				diff /= zoomableSteps;\r\n				windowScale = 1/((1/windowScale) - diff * eventData.current.userZoom);\r\n			}\r\n\r\n			eventData.target.transform.reverse();\r\n			if(eventData.current.userTranslateX && eventData.current.userTranslateY) {\r\n				eventData.target.transform.push(["translate", eventData.current.userTranslateX, eventData.current.userTranslateY, 0]);\r\n			} else {\r\n				eventData.target.transform.push(["translate"]);\r\n			}\r\n			eventData.target.transform.push(["scale",\r\n				windowScale,\r\n				windowScale,\r\n				1]);\r\n			eventData.target.transform.reverse();\r\n		}\r\n		eventData.current.zoomOriginWindowScale = windowScale;\r\n	});\r\n	$.jmpress("setInactive", function( step, eventData ) {\r\n		if(!eventData.nextStep || !step || $(eventData.nextStep).attr("id") !== $(step).attr("id")) {\r\n			eventData.current.userZoom = 0;\r\n			eventData.current.userTranslateX = 0;\r\n			eventData.current.userTranslateY = 0;\r\n		}\r\n	});\r\n\r\n}(jQuery, document, window));'},38:function(a,b,c){a.exports='/*!\r\n * ways.js\r\n * Control the flow of the steps\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n	var $jmpress = $.jmpress;\r\n\r\n	/* FUNCTIONS */\r\n	function randomString() {\r\n		return "" + Math.round(Math.random() * 100000, 0);\r\n	}\r\n	// TODO allow call of route after init\r\n	function routeFunc( jmpress, route, type ) {\r\n		for(var i = 0; i < route.length - 1; i++) {\r\n			var from = route[i];\r\n			var to = route[i+1];\r\n			$(from, jmpress).attr(\'data-\' + type, to);\r\n		}\r\n	}\r\n	function selectPrevOrNext( step, eventData, attr, prev ) {\r\n		var stepData = eventData.stepData;\r\n		if(stepData[attr]) {\r\n			var near = $(step).near(stepData[attr], prev);\r\n			if(near && near.length) {\r\n				return near;\r\n			}\r\n			near = $(stepData[attr], this)[prev?"last":"first"]();\r\n			if(near && near.length) {\r\n				return near;\r\n			}\r\n		}\r\n	}\r\n\r\n	/* EXPORTED FUNCTIONS */\r\n	$jmpress( \'register\', \'route\', function( route, unidirectional, reversedRoute ) {\r\n		if( typeof route === "string" ) {\r\n			route = [route, route];\r\n		}\r\n		routeFunc(this, route, reversedRoute ? "prev" : "next");\r\n		if (!unidirectional) {\r\n			routeFunc(this, route.reverse(), reversedRoute ? "next" : "prev");\r\n		}\r\n	});\r\n\r\n	/* HOOKS */\r\n	$jmpress( \'initStep\', function( step, eventData ) {\r\n		for(var attr in {next:1,prev:1}) {\r\n			eventData.stepData[attr] = eventData.data[attr];\r\n		}\r\n	});\r\n	$jmpress( \'selectNext\', function( step, eventData ) {\r\n		return selectPrevOrNext.call(this, step, eventData, "next");\r\n	});\r\n	$jmpress( \'selectPrev\', function( step, eventData ) {\r\n		return selectPrevOrNext.call(this, step, eventData, "prev", true);\r\n	});\r\n\r\n}(jQuery, document, window));'},39:function(a,b,c){a.exports='/*!\r\n * jmpress.duration plugin\r\n * For auto advancing steps after a given duration and optionally displaying a\r\n * progress bar.\r\n */\r\n(function( $, document, window, undefined ) {\r\n	\'use strict\';\r\n\r\n	$.jmpress("defaults").duration = {\r\n		defaultValue: -1\r\n		,defaultAction: "next"\r\n		,barSelector: undefined\r\n		,barProperty: "width"\r\n		,barPropertyStart: "0"\r\n		,barPropertyEnd: "100%"\r\n	};\r\n	$.jmpress("initStep", function( step, eventData ) {\r\n		eventData.stepData.duration = eventData.data.duration;\r\n		eventData.stepData.durationAction = eventData.data.durationAction;\r\n	});\r\n	$.jmpress("setInactive", function( step, eventData ) {\r\n		var settings = eventData.settings,\r\n			durationSettings = settings.duration,\r\n			current = eventData.current;\r\n		var dur = eventData.stepData.duration || durationSettings.defaultValue;\r\n		if( dur && dur > 0 ) {\r\n			if( durationSettings.barSelector ) {\r\n				var css = {\r\n					transitionProperty: durationSettings.barProperty\r\n					,transitionDuration: \'0\'\r\n					,transitionDelay: \'0\'\r\n					,transitionTimingFunction: \'linear\'\r\n				};\r\n				css[durationSettings.barProperty] = durationSettings.barPropertyStart;\r\n				var bars = $(durationSettings.barSelector);\r\n				$.jmpress("css", bars, css);\r\n				bars.each(function(idx, element) {\r\n					var next = $(element).next();\r\n					var parent = $(element).parent();\r\n					$(element).detach();\r\n					if(next.length) {\r\n						next.insertBefore(element);\r\n					} else {\r\n						parent.append(element);\r\n					}\r\n				});\r\n			}\r\n			if(current.durationTimeout) {\r\n				clearTimeout(current.durationTimeout);\r\n				current.durationTimeout = undefined;\r\n			}\r\n		}\r\n	});\r\n	$.jmpress("setActive", function( step, eventData ) {\r\n		var settings = eventData.settings,\r\n			durationSettings = settings.duration,\r\n			current = eventData.current;\r\n		var dur = eventData.stepData.duration || durationSettings.defaultValue;\r\n		if( dur && dur > 0 ) {\r\n			if( durationSettings.barSelector ) {\r\n				var css = {\r\n					transitionProperty: durationSettings.barProperty\r\n					,transitionDuration: (dur-settings.transitionDuration*2/3-100)+"ms"\r\n					,transitionDelay: (settings.transitionDuration*2/3)+\'ms\'\r\n					,transitionTimingFunction: \'linear\'\r\n				};\r\n				css[durationSettings.barProperty] = durationSettings.barPropertyEnd;\r\n				$.jmpress("css", $(durationSettings.barSelector), css);\r\n			}\r\n			var jmpress = this;\r\n			if(current.durationTimeout) {\r\n				clearTimeout(current.durationTimeout);\r\n				current.durationTimeout = undefined;\r\n			}\r\n			current.durationTimeout = setTimeout(function() {\r\n				var action = eventData.stepData.durationAction || durationSettings.defaultAction;\r\n				$(jmpress).jmpress(action);\r\n			}, dur);\r\n		}\r\n	});\r\n}(jQuery, document, window));\r\n'},40:function(a,b,c){a.exports='/*!\r\n * jmpress.presentation-mode plugin\r\n * Display a window for the presenter with notes and a control and view of the\r\n * presentation\r\n */\r\n(function( $, document, window, undefined ) {\r\n\r\n	\'use strict\';\r\n	var $jmpress = $.jmpress;\r\n\r\n	/* FUNCTIONS */\r\n	function randomString() {\r\n		return "" + Math.round(Math.random() * 100000, 0);\r\n	}\r\n\r\n	/* DEFAULTS */\r\n	$jmpress("defaults").presentationMode = {\r\n		use: true,\r\n		url: "presentation-screen.html",\r\n		notesUrl: false,\r\n		transferredValues: ["userZoom", "userTranslateX", "userTranslateY"]\r\n	};\r\n	$jmpress("defaults").keyboard.keys[80] = "presentationPopup"; // p key\r\n\r\n	/* HOOKS */\r\n	$jmpress("afterInit", function( nil, eventData) {\r\n		var current = eventData.current;\r\n\r\n		current.selectMessageListeners = [];\r\n\r\n		if(eventData.settings.presentationMode.use) {\r\n\r\n			window.addEventListener("message", function(event) {\r\n				// We do not test orgin, because we want to accept messages\r\n				// from all orgins\r\n				try {\r\n					var json = JSON.parse(event.data);\r\n					switch(json.type) {\r\n					case "select":\r\n						// TODO SECURITY filter targetId\r\n						$.each(eventData.settings.presentationMode.transferredValues, function(idx, name) {\r\n							eventData.current[name] = json[name];\r\n						});\r\n						$(eventData.jmpress).jmpress("select", {step: "#"+json.targetId, substep: json.substep}, json.reason);\r\n						break;\r\n					case "listen":\r\n						current.selectMessageListeners.push(event.source);\r\n						break;\r\n					case "ok":\r\n						clearTimeout(current.presentationPopupTimeout);\r\n						break;\r\n					case "read":\r\n						try {\r\n							event.source.postMessage(JSON.stringify({type: "url", url: window.location.href, notesUrl: eventData.settings.presentationMode.notesUrl}), "*");\r\n						} catch(e) {\r\n							$.error("Cannot post message to source: " + e);\r\n						}\r\n						break;\r\n					default:\r\n						throw "Unknown message type: " + json.type;\r\n					}\r\n				} catch(e) {\r\n					$.error("Recieved message is malformed: " + e);\r\n				}\r\n			});\r\n			try {\r\n				if(window.parent && window.parent !== window) {\r\n					window.parent.postMessage(JSON.stringify({\r\n						"type": "afterInit"\r\n					}), "*");\r\n				}\r\n			} catch(e) {\r\n				$.error("Cannot post message to parent: " + e);\r\n			}\r\n		}\r\n	});\r\n	$jmpress("afterDeinit", function( nil, eventData) {\r\n		if(eventData.settings.presentationMode.use) {\r\n			try {\r\n				if(window.parent && window.parent !== window) {\r\n					window.parent.postMessage(JSON.stringify({\r\n						"type": "afterDeinit"\r\n					}), "*");\r\n				}\r\n			} catch(e) {\r\n				$.error("Cannot post message to parent: " + e);\r\n			}\r\n		}\r\n	});\r\n	$jmpress("setActive", function( step, eventData) {\r\n		var stepId = $(eventData.delegatedFrom).attr("id"),\r\n			substep = eventData.substep,\r\n			reason = eventData.reason;\r\n		$.each(eventData.current.selectMessageListeners, function(idx, listener) {\r\n			try {\r\n				var msg = {\r\n					"type": "select",\r\n					"targetId": stepId,\r\n					"substep": substep,\r\n					"reason": reason\r\n				};\r\n				$.each(eventData.settings.presentationMode.transferredValues, function(idx, name) {\r\n					msg[name] = eventData.current[name];\r\n				});\r\n				listener.postMessage(JSON.stringify(msg), "*");\r\n			} catch(e) {\r\n				$.error("Cannot post message to listener: " + e);\r\n			}\r\n		});\r\n	});\r\n	$jmpress("register", "presentationPopup", function() {\r\n		function trySend() {\r\n			jmpress.jmpress("current").presentationPopupTimeout = setTimeout(trySend, 100);\r\n			try {\r\n				popup.postMessage(JSON.stringify({type: "url", url: window.location.href, notesUrl: jmpress.jmpress("settings").presentationMode.notesUrl}), "*");\r\n			} catch(e) {\r\n			}\r\n		}\r\n		var jmpress = $(this),\r\n			popup;\r\n		if(jmpress.jmpress("settings").presentationMode.use) {\r\n			popup = window.open($(this).jmpress("settings").presentationMode.url);\r\n			jmpress.jmpress("current").presentationPopupTimeout = setTimeout(trySend, 100);\r\n		}\r\n	});\r\n}(jQuery, document, window));\r\n'},41:function(a,b,c){a.exports='/*!\r\n * jmpress.secondary plugin\r\n * Apply a secondary animation when step is selected.\r\n */\r\n(function( $, document, window, undefined ) {\r\n	\'use strict\';\r\n	$.jmpress("initStep", function( step, eventData ) {\r\n		for(var name in eventData.data) {\r\n			if(name.indexOf("secondary") === 0) {\r\n				eventData.stepData[name] = eventData.data[name];\r\n			}\r\n		}\r\n	});\r\n	function exchangeIf(childStepData, condition, step) {\r\n		if(childStepData.secondary &&\r\n			childStepData.secondary.split(" ").indexOf(condition) !== -1) {\r\n			for(var name in childStepData) {\r\n				if(name.length > 9 && name.indexOf("secondary") === 0) {\r\n					var tmp = childStepData[name];\r\n					var normal = name.substr(9);\r\n					normal = normal.substr(0, 1).toLowerCase() + normal.substr(1);\r\n					childStepData[name] = childStepData[normal];\r\n					childStepData[normal] = tmp;\r\n				}\r\n			}\r\n			$(this).jmpress("reapply", $(step));\r\n		}\r\n	}\r\n	$.jmpress("beforeActive", function( step, eventData ) {\r\n		exchangeIf.call(eventData.jmpress, $(step).data("stepData"), "self", step);\r\n		var parent = $(step).parent();\r\n		$(parent)\r\n			.children(eventData.settings.stepSelector)\r\n			.each(function(idx, child) {\r\n				var childStepData = $(child).data("stepData");\r\n				exchangeIf.call(eventData.jmpress, childStepData, "siblings", child);\r\n			});\r\n		function grandchildrenFunc(idx, child) {\r\n			var childStepData = $(child).data("stepData");\r\n			exchangeIf.call(eventData.jmpress, childStepData, "grandchildren", child);\r\n		}\r\n		for(var i = 1; i < eventData.parents.length; i++) {\r\n			$(eventData.parents[i])\r\n				.children(eventData.settings.stepSelector)\r\n				.each();\r\n		}\r\n	});\r\n	$.jmpress("setInactive", function( step, eventData ) {\r\n		exchangeIf.call(eventData.jmpress, $(step).data("stepData"), "self", step);\r\n		var parent = $(step).parent();\r\n		$(parent)\r\n			.children(eventData.settings.stepSelector)\r\n			.each(function(idx, child) {\r\n				var childStepData = $(child).data("stepData");\r\n				exchangeIf.call(eventData.jmpress, childStepData, "siblings", child);\r\n			});\r\n		function grandchildrenFunc(idx, child) {\r\n			var childStepData = $(child).data("stepData");\r\n			exchangeIf.call(eventData.jmpress, childStepData, "grandchildren", child);\r\n		}\r\n		for(var i = 1; i < eventData.parents.length; i++) {\r\n			$(eventData.parents[i])\r\n				.children(eventData.settings.stepSelector)\r\n				.each(grandchildrenFunc);\r\n		}\r\n	});\r\n}(jQuery, document, window));\r\n'},42:function(a,b,c){a.exports='/*!\r\n * jmpress.toggle plugin\r\n * For binding a key to toggle de/initialization of jmpress.js.\r\n */\r\n(function( $, document, window, undefined ) {\r\n	\'use strict\';\r\n	$.jmpress("register", "toggle", function( key, config, initial ) {\r\n		var jmpress = this;\r\n		$(document).bind("keydown", function( event ) {\r\n			if ( event.keyCode === key ) {\r\n				if ($(jmpress).jmpress("initialized")) {\r\n					$(jmpress).jmpress("deinit");\r\n				} else {\r\n					$(jmpress).jmpress(config);\r\n				}\r\n			}\r\n		});\r\n		if ( initial ) {\r\n			$(jmpress).jmpress(config);\r\n		}\r\n	});\r\n}(jQuery, document, window));\r\n'}})